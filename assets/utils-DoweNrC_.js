var u=Object.defineProperty;var g=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var i=(e,t)=>u(e,"name",{value:t,configurable:!0});var E=(e,t,n)=>g(e,typeof t!="symbol"?t+"":t,n);function c(e){return e!=null&&e.nodeType===Node.ELEMENT_NODE}i(c,"isElement");function d(e){return e!=null&&e.nodeType===Node.TEXT_NODE}i(d,"isTextNode");function N(e){const t=document.createElement("div");if(t.innerHTML=I(e),t.childNodes.length>1)return t;const n=t.firstElementChild;return c(n)?n:t}i(N,"htmlToElement");const v=/ {2,}/g,T=/\n+/g,A=/\n {1,}/g,L=/ {1,}\n/g,P=/\n/g;function I(e){return e.replace(v," ").replace(T,`
`).replace(A,`
`).replace(L,`
`).replace(P,"").trim()}i(I,"trimWhitespace");function _(e,t){var n;const s=typeof t=="string";if(t==null||s&&t.length===0){(n=e.parentElement)===null||n===void 0||n.removeChild(e);return}const o=s?N(t):t;return C(e,o)}i(_,"update");function C(e,t){if(w(e,t))return y(e,t);const n=Array.from(t.childNodes).slice(e.childNodes.length),s=[];if(e.childNodes.forEach((o,l)=>{const a=t.childNodes[l];if(!a)return s.push(o);(o.hasChildNodes()||a.hasChildNodes())&&C(o,a),d(o)&&d(a)&&o.textContent!==a.textContent&&(o.textContent=a.textContent)}),s.forEach(e.removeChild.bind(e)),n.forEach(e.appendChild.bind(e)),c(e)){const o=m(e),l=m(t),a=c(t);for(const{key:r,value:p}of l)e.getAttribute(r)!==p&&e.setAttribute(r,p);for(const{key:r}of o)a&&(t.hasAttribute(r)||e.removeAttribute(r))}}i(C,"updateNode");function m(e){return c(e)?e.getAttributeNames().reduce((t,n)=>[...t,{key:n,value:e.getAttribute(n)||""}],[]):[]}i(m,"getAttributes");function w(e,t){return e.nodeType!==t.nodeType?!0:c(e)&&c(t)?e.tagName!==t.tagName:e.textContent!==t.textContent}i(w,"shouldUpdateWholeNode");function y(e,t){c(e)?e.replaceWith(t):d(e)&&d(t)?e.textContent=t.textContent:d(e)&&c(t)?e.parentElement?e.parentElement.replaceChild(t,e):console.warn(`Unexpected case, missing parentElement: ${e}`):console.warn(["Unexpected case:",`isElement(current): ${c(e)}`,`isTextNode(current): ${d(e)}`,`isElement(next): ${c(t)}`,`isTextNode(next): ${d(t)}`].join(" "))}i(y,"updateWholeNode");function x(e,t){const n=document.createElement("button");n.textContent="Mount";const s=document.createElement("div");s.appendChild(n),s.appendChild(N(e));let o=!1;return n.addEventListener("click",()=>{const l=s.lastChild;if(!l)throw new Error("wrapper missing lastChild");_(l,o?e:t),o=!o,b.emit(void 0)}),s}i(x,"createMountToggle");function G(...e){const t=document.createElement("button");t.textContent="Next state";const n=document.createElement("div");n.appendChild(t);function s(){for(const a of n.childNodes)a!==t&&n.removeChild(a)}i(s,"cleanWrapper");const o=e.length;let l=0;return t.addEventListener("click",()=>{l===o?(s(),l=0):(e[l](n),l++),b.emit(void 0)}),n}i(G,"createButtonCycle");const h=class h{constructor(){E(this,"subscribers",[]);E(this,"events",[])}on(t){this.subscribers.push(t),this.events.forEach(t)}off(t){this.subscribers=this.subscribers.filter(n=>n!==t)}emit(t){this.subscribers.forEach(n=>n(t)),this.events.push(t)}clear(){this.events=[]}};i(h,"EventBus");let f=h;const b=new f,R=new f;function S(e){return i(function(n){const s=Array(e).fill(null).map(n);if(s.some(o=>o instanceof Promise))return Promise.all(s)},"execute")}i(S,"times");export{R as A,b as S,G as a,x as c,S as t};
