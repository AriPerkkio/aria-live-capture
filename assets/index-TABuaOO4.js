var pn=Object.defineProperty;var n=(o,s)=>pn(o,"name",{value:s,configurable:!0});import{c as un}from"./_commonjsHelpers-1BxWT6uA.js";var we={exports:{}};(function(o,s){(function(i,p){p(s)})(un,function(i){function p(e){return e.text!==void 0&&e.text!==""?`'${e.type}' with value '${e.text}'`:`'${e.type}'`}n(p,"tokenToString");const Z=class Z extends Error{constructor(t){super(`No parslet found for token: ${p(t)}`),this.token=t,Object.setPrototypeOf(this,Z.prototype)}getToken(){return this.token}};n(Z,"NoParsletFoundError");let u=Z;const ee=class ee extends Error{constructor(t){super(`The parsing ended early. The next token was: ${p(t)}`),this.token=t,Object.setPrototypeOf(this,ee.prototype)}getToken(){return this.token}};n(ee,"EarlyEndOfParseError");let y=ee;const te=class te extends Error{constructor(t,r){let a=`Unexpected type: '${t.type}'.`;r!==void 0&&(a+=` Message: ${r}`),super(a),Object.setPrototypeOf(this,te.prototype)}};n(te,"UnexpectedTypeError");let m=te;function h(e){return t=>t.startsWith(e)?{type:e,text:e}:null}n(h,"makePunctuationRule");function J(e){let t=0,r;const a=e[0];let c=!1;if(a!=="'"&&a!=='"')return null;for(;t<e.length;){if(t++,r=e[t],!c&&r===a){t++;break}c=!c&&r==="\\"}if(r!==a)throw new Error("Unterminated String");return e.slice(0,t)}n(J,"getQuoted");const O=new RegExp("[$_\\p{ID_Start}]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u"),P=new RegExp("[$\\-\\p{ID_Continue}\\u200C\\u200D]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u");function oe(e){let t=e[0];if(!O.test(t))return null;let r=1;do{if(t=e[r],!P.test(t))break;r++}while(r<e.length);return e.slice(0,r)}n(oe,"getIdentifier");const D=/^(NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity))/;function C(e){var t,r;return(r=(t=D.exec(e))===null||t===void 0?void 0:t[0])!==null&&r!==void 0?r:null}n(C,"getNumber");const Y=n(e=>{const t=oe(e);return t==null?null:{type:"Identifier",text:t}},"identifierRule");function b(e){return t=>{if(!t.startsWith(e))return null;const r=t[e.length];return r!==void 0&&P.test(r)?null:{type:e,text:e}}}n(b,"makeKeyWordRule");const se=n(e=>{const t=J(e);return t==null?null:{type:"StringValue",text:t}},"stringValueRule"),kt=n(e=>e.length>0?null:{type:"EOF",text:""},"eofRule"),xt=n(e=>{const t=C(e);return t===null?null:{type:"Number",text:t}},"numberRule"),St=[kt,h("=>"),h("("),h(")"),h("{"),h("}"),h("["),h("]"),h("|"),h("&"),h("<"),h(">"),h(","),h(";"),h("*"),h("?"),h("!"),h("="),h(":"),h("..."),h("."),h("#"),h("~"),h("/"),h("@"),b("undefined"),b("null"),b("function"),b("this"),b("new"),b("module"),b("event"),b("external"),b("typeof"),b("keyof"),b("readonly"),b("import"),b("is"),b("in"),b("asserts"),xt,Y,se],Ot=/^\s*\n\s*/,$=class ${static create(t){const r=this.read(t);t=r.text;const a=this.read(t);return t=a.text,new $(t,void 0,r.token,a.token)}constructor(t,r,a,c){this.text="",this.text=t,this.previous=r,this.current=a,this.next=c}static read(t,r=!1){r=r||Ot.test(t),t=t.trim();for(const a of St){const c=a(t);if(c!==null){const d=Object.assign(Object.assign({},c),{startOfLine:r});return t=t.slice(d.text.length),{text:t,token:d}}}throw new Error("Unexpected Token "+t)}advance(){const t=$.read(this.text);return new $(t.text,this.current,this.next,t.token)}};n($,"Lexer");let ae=$;function N(e){if(e===void 0)throw new Error("Unexpected undefined");if(e.type==="JsdocTypeKeyValue"||e.type==="JsdocTypeParameterList"||e.type==="JsdocTypeProperty"||e.type==="JsdocTypeReadonlyProperty"||e.type==="JsdocTypeObjectField"||e.type==="JsdocTypeJsdocObjectField"||e.type==="JsdocTypeIndexSignature"||e.type==="JsdocTypeMappedType")throw new m(e);return e}n(N,"assertRootResult");function ie(e){return e.type==="JsdocTypeKeyValue"?G(e):N(e)}n(ie,"assertPlainKeyValueOrRootResult");function It(e){return e.type==="JsdocTypeName"?e:G(e)}n(It,"assertPlainKeyValueOrNameResult");function G(e){if(e.type!=="JsdocTypeKeyValue")throw new m(e);return e}n(G,"assertPlainKeyValueResult");function vt(e){var t;if(e.type==="JsdocTypeVariadic"){if(((t=e.element)===null||t===void 0?void 0:t.type)==="JsdocTypeName")return e;throw new m(e)}if(e.type!=="JsdocTypeNumber"&&e.type!=="JsdocTypeName")throw new m(e);return e}n(vt,"assertNumberOrVariadicNameResult");function ce(e){return e.type==="JsdocTypeIndexSignature"||e.type==="JsdocTypeMappedType"}n(ce,"isSquaredProperty");var f;(function(e){e[e.ALL=0]="ALL",e[e.PARAMETER_LIST=1]="PARAMETER_LIST",e[e.OBJECT=2]="OBJECT",e[e.KEY_VALUE=3]="KEY_VALUE",e[e.INDEX_BRACKETS=4]="INDEX_BRACKETS",e[e.UNION=5]="UNION",e[e.INTERSECTION=6]="INTERSECTION",e[e.PREFIX=7]="PREFIX",e[e.INFIX=8]="INFIX",e[e.TUPLE=9]="TUPLE",e[e.SYMBOL=10]="SYMBOL",e[e.OPTIONAL=11]="OPTIONAL",e[e.NULLABLE=12]="NULLABLE",e[e.KEY_OF_TYPE_OF=13]="KEY_OF_TYPE_OF",e[e.FUNCTION=14]="FUNCTION",e[e.ARROW=15]="ARROW",e[e.ARRAY_BRACKETS=16]="ARRAY_BRACKETS",e[e.GENERIC=17]="GENERIC",e[e.NAME_PATH=18]="NAME_PATH",e[e.PARENTHESIS=19]="PARENTHESIS",e[e.SPECIAL_TYPES=20]="SPECIAL_TYPES"})(f||(f={}));const ge=class ge{constructor(t,r,a){this.grammar=t,typeof r=="string"?this._lexer=ae.create(r):this._lexer=r,this.baseParser=a}get lexer(){return this._lexer}parse(){const t=this.parseType(f.ALL);if(this.lexer.current.type!=="EOF")throw new y(this.lexer.current);return t}parseType(t){return N(this.parseIntermediateType(t))}parseIntermediateType(t){const r=this.tryParslets(null,t);if(r===null)throw new u(this.lexer.current);return this.parseInfixIntermediateType(r,t)}parseInfixIntermediateType(t,r){let a=this.tryParslets(t,r);for(;a!==null;)t=a,a=this.tryParslets(t,r);return t}tryParslets(t,r){for(const a of this.grammar){const c=a(this,r,t);if(c!==null)return c}return null}consume(t){return Array.isArray(t)||(t=[t]),t.includes(this.lexer.current.type)?(this._lexer=this.lexer.advance(),!0):!1}acceptLexerState(t){this._lexer=t.lexer}};n(ge,"Parser");let A=ge;function ve(e){return e==="EOF"||e==="|"||e===","||e===")"||e===">"}n(ve,"isQuestionMarkUnknownType");const le=n((e,t,r)=>{const a=e.lexer.current.type,c=e.lexer.next.type;return r==null&&a==="?"&&!ve(c)||r!=null&&a==="?"?(e.consume("?"),r==null?{type:"JsdocTypeNullable",element:e.parseType(f.NULLABLE),meta:{position:"prefix"}}:{type:"JsdocTypeNullable",element:N(r),meta:{position:"suffix"}}):null},"nullableParslet");function g(e){const t=n((r,a,c)=>{const d=r.lexer.current.type,T=r.lexer.next.type;if(c===null){if("parsePrefix"in e&&e.accept(d,T))return e.parsePrefix(r)}else if("parseInfix"in e&&e.precedence>a&&e.accept(d,T))return e.parseInfix(r,c);return null},"parslet");return Object.defineProperty(t,"name",{value:e.name}),t}n(g,"composeParslet");const W=g({name:"optionalParslet",accept:n(e=>e==="=","accept"),precedence:f.OPTIONAL,parsePrefix:n(e=>(e.consume("="),{type:"JsdocTypeOptional",element:e.parseType(f.OPTIONAL),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:n((e,t)=>(e.consume("="),{type:"JsdocTypeOptional",element:N(t),meta:{position:"suffix"}}),"parseInfix")}),X=g({name:"numberParslet",accept:n(e=>e==="Number","accept"),parsePrefix:n(e=>{const t=parseFloat(e.lexer.current.text);return e.consume("Number"),{type:"JsdocTypeNumber",value:t}},"parsePrefix")}),At=g({name:"parenthesisParslet",accept:n(e=>e==="(","accept"),parsePrefix:n(e=>{if(e.consume("("),e.consume(")"))return{type:"JsdocTypeParameterList",elements:[]};const t=e.parseIntermediateType(f.ALL);if(!e.consume(")"))throw new Error("Unterminated parenthesis");return t.type==="JsdocTypeParameterList"?t:t.type==="JsdocTypeKeyValue"?{type:"JsdocTypeParameterList",elements:[t]}:{type:"JsdocTypeParenthesis",element:N(t)}},"parsePrefix")}),Rt=g({name:"specialTypesParslet",accept:n((e,t)=>e==="?"&&ve(t)||e==="null"||e==="undefined"||e==="*","accept"),parsePrefix:n(e=>{if(e.consume("null"))return{type:"JsdocTypeNull"};if(e.consume("undefined"))return{type:"JsdocTypeUndefined"};if(e.consume("*"))return{type:"JsdocTypeAny"};if(e.consume("?"))return{type:"JsdocTypeUnknown"};throw new Error("Unacceptable token: "+e.lexer.current.text)},"parsePrefix")}),_t=g({name:"notNullableParslet",accept:n(e=>e==="!","accept"),precedence:f.NULLABLE,parsePrefix:n(e=>(e.consume("!"),{type:"JsdocTypeNotNullable",element:e.parseType(f.NULLABLE),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:n((e,t)=>(e.consume("!"),{type:"JsdocTypeNotNullable",element:N(t),meta:{position:"suffix"}}),"parseInfix")});function Lt({allowTrailingComma:e}){return g({name:"parameterListParslet",accept:n(t=>t===",","accept"),precedence:f.PARAMETER_LIST,parseInfix:n((t,r)=>{const a=[ie(r)];t.consume(",");do try{const c=t.parseIntermediateType(f.PARAMETER_LIST);a.push(ie(c))}catch(c){if(e&&c instanceof u)break;throw c}while(t.consume(","));if(a.length>0&&a.slice(0,-1).some(c=>c.type==="JsdocTypeVariadic"))throw new Error("Only the last parameter may be a rest parameter");return{type:"JsdocTypeParameterList",elements:a}},"parseInfix")})}n(Lt,"createParameterListParslet");const Ft=g({name:"genericParslet",accept:n((e,t)=>e==="<"||e==="."&&t==="<","accept"),precedence:f.GENERIC,parseInfix:n((e,t)=>{const r=e.consume(".");e.consume("<");const a=[];do a.push(e.parseType(f.PARAMETER_LIST));while(e.consume(","));if(!e.consume(">"))throw new Error("Unterminated generic parameter list");return{type:"JsdocTypeGeneric",left:N(t),elements:a,meta:{brackets:"angle",dot:r}}},"parseInfix")}),jt=g({name:"unionParslet",accept:n(e=>e==="|","accept"),precedence:f.UNION,parseInfix:n((e,t)=>{e.consume("|");const r=[];do r.push(e.parseType(f.UNION));while(e.consume("|"));return{type:"JsdocTypeUnion",elements:[N(t),...r]}},"parseInfix")}),pe=[le,W,X,At,Rt,_t,Lt({allowTrailingComma:!0}),Ft,jt,W];function H({allowSquareBracketsOnAnyType:e,allowJsdocNamePaths:t,pathGrammar:r}){return n(function(c,d,T){if(T==null||d>=f.NAME_PATH)return null;const w=c.lexer.current.type,S=c.lexer.next.type;if(!(w==="."&&S!=="<"||w==="["&&(e||T.type==="JsdocTypeName")||t&&(w==="~"||w==="#")))return null;let I,ne=!1;c.consume(".")?I="property":c.consume("[")?(I="property-brackets",ne=!0):c.consume("~")?I="inner":(c.consume("#"),I="instance");const $e=r!==null?new A(r,c.lexer,c):c,v=$e.parseIntermediateType(f.NAME_PATH);c.acceptLexerState($e);let B;switch(v.type){case"JsdocTypeName":B={type:"JsdocTypeProperty",value:v.value,meta:{quote:void 0}};break;case"JsdocTypeNumber":B={type:"JsdocTypeProperty",value:v.value.toString(10),meta:{quote:void 0}};break;case"JsdocTypeStringValue":B={type:"JsdocTypeProperty",value:v.value,meta:{quote:v.meta.quote}};break;case"JsdocTypeSpecialNamePath":if(v.specialType==="event")B=v;else throw new m(v,"Type 'JsdocTypeSpecialNamePath' is only allowed with specialType 'event'");break;default:throw new m(v,"Expecting 'JsdocTypeName', 'JsdocTypeNumber', 'JsdocStringValue' or 'JsdocTypeSpecialNamePath'")}if(ne&&!c.consume("]")){const De=c.lexer.current;throw new Error(`Unterminated square brackets. Next token is '${De.type}' with text '${De.text}'`)}return{type:"JsdocTypeNamePath",left:N(T),right:B,pathType:I}},"namePathParslet")}n(H,"createNamePathParslet");function R({allowedAdditionalTokens:e}){return g({name:"nameParslet",accept:n(t=>t==="Identifier"||t==="this"||t==="new"||e.includes(t),"accept"),parsePrefix:n(t=>{const{type:r,text:a}=t.lexer.current;return t.consume(r),{type:"JsdocTypeName",value:a}},"parsePrefix")})}n(R,"createNameParslet");const q=g({name:"stringValueParslet",accept:n(e=>e==="StringValue","accept"),parsePrefix:n(e=>{const t=e.lexer.current.text;return e.consume("StringValue"),{type:"JsdocTypeStringValue",value:t.slice(1,-1),meta:{quote:t[0]==="'"?"single":"double"}}},"parsePrefix")});function Q({pathGrammar:e,allowedTypes:t}){return g({name:"specialNamePathParslet",accept:n(r=>t.includes(r),"accept"),parsePrefix:n(r=>{const a=r.lexer.current.type;if(r.consume(a),!r.consume(":"))return{type:"JsdocTypeName",value:a};let c,d=r.lexer.current;if(r.consume("StringValue"))c={type:"JsdocTypeSpecialNamePath",value:d.text.slice(1,-1),specialType:a,meta:{quote:d.text[0]==="'"?"single":"double"}};else{let S="";const k=["Identifier","@","/"];for(;k.some(I=>r.consume(I));)S+=d.text,d=r.lexer.current;c={type:"JsdocTypeSpecialNamePath",value:S,specialType:a,meta:{quote:void 0}}}const T=new A(e,r.lexer,r),w=T.parseInfixIntermediateType(c,f.ALL);return r.acceptLexerState(T),N(w)},"parsePrefix")})}n(Q,"createSpecialNamePathParslet");const Ae=[R({allowedAdditionalTokens:["external","module"]}),q,X,H({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:null})],K=[...Ae,Q({allowedTypes:["event"],pathGrammar:Ae})];function ue(e){let t;if(e.type==="JsdocTypeParameterList")t=e.elements;else if(e.type==="JsdocTypeParenthesis")t=[e.element];else throw new m(e);return t.map(r=>ie(r))}n(ue,"getParameters");function Ut(e){const t=ue(e);if(t.some(r=>r.type==="JsdocTypeKeyValue"))throw new Error("No parameter should be named");return t}n(Ut,"getUnnamedParameters");function ye({allowNamedParameters:e,allowNoReturnType:t,allowWithoutParenthesis:r,allowNewAsFunctionKeyword:a}){return g({name:"functionParslet",accept:n((c,d)=>c==="function"||a&&c==="new"&&d==="(","accept"),parsePrefix:n(c=>{const d=c.consume("new");c.consume("function");const T=c.lexer.current.type==="(";if(!T){if(!r)throw new Error("function is missing parameter list");return{type:"JsdocTypeName",value:"function"}}let w={type:"JsdocTypeFunction",parameters:[],arrow:!1,constructor:d,parenthesis:T};const S=c.parseIntermediateType(f.FUNCTION);if(e===void 0)w.parameters=Ut(S);else{if(d&&S.type==="JsdocTypeFunction"&&S.arrow)return w=S,w.constructor=!0,w;w.parameters=ue(S);for(const k of w.parameters)if(k.type==="JsdocTypeKeyValue"&&!e.includes(k.key))throw new Error(`only allowed named parameters are ${e.join(", ")} but got ${k.type}`)}if(c.consume(":"))w.returnType=c.parseType(f.PREFIX);else if(!t)throw new Error("function is missing return type");return w},"parsePrefix")})}n(ye,"createFunctionParslet");function de({allowPostfix:e,allowEnclosingBrackets:t}){return g({name:"variadicParslet",accept:n(r=>r==="...","accept"),precedence:f.PREFIX,parsePrefix:n(r=>{r.consume("...");const a=t&&r.consume("[");try{const c=r.parseType(f.PREFIX);if(a&&!r.consume("]"))throw new Error("Unterminated variadic type. Missing ']'");return{type:"JsdocTypeVariadic",element:N(c),meta:{position:"prefix",squareBrackets:a}}}catch(c){if(c instanceof u){if(a)throw new Error("Empty square brackets for variadic are not allowed.");return{type:"JsdocTypeVariadic",meta:{position:void 0,squareBrackets:!1}}}else throw c}},"parsePrefix"),parseInfix:e?(r,a)=>(r.consume("..."),{type:"JsdocTypeVariadic",element:N(a),meta:{position:"suffix",squareBrackets:!1}}):void 0})}n(de,"createVariadicParslet");const Re=g({name:"symbolParslet",accept:n(e=>e==="(","accept"),precedence:f.SYMBOL,parseInfix:n((e,t)=>{if(t.type!=="JsdocTypeName")throw new Error("Symbol expects a name on the left side. (Reacting on '(')");e.consume("(");const r={type:"JsdocTypeSymbol",value:t.value};if(!e.consume(")")){const a=e.parseIntermediateType(f.SYMBOL);if(r.element=vt(a),!e.consume(")"))throw new Error("Symbol does not end after value")}return r},"parseInfix")}),_e=g({name:"arrayBracketsParslet",precedence:f.ARRAY_BRACKETS,accept:n((e,t)=>e==="["&&t==="]","accept"),parseInfix:n((e,t)=>(e.consume("["),e.consume("]"),{type:"JsdocTypeGeneric",left:{type:"JsdocTypeName",value:"Array"},elements:[N(t)],meta:{brackets:"square",dot:!1}}),"parseInfix")});function me({objectFieldGrammar:e,allowKeyTypes:t}){return g({name:"objectParslet",accept:n(r=>r==="{","accept"),parsePrefix:n(r=>{r.consume("{");const a={type:"JsdocTypeObject",meta:{separator:"comma"},elements:[]};if(!r.consume("}")){let c;const d=new A(e,r.lexer,r);for(;;){d.acceptLexerState(r);let T=d.parseIntermediateType(f.OBJECT);r.acceptLexerState(d),T===void 0&&t&&(T=r.parseIntermediateType(f.OBJECT));let w=!1;if(T.type==="JsdocTypeNullable"&&(w=!0,T=T.element),T.type==="JsdocTypeNumber"||T.type==="JsdocTypeName"||T.type==="JsdocTypeStringValue"){let k;T.type==="JsdocTypeStringValue"&&(k=T.meta.quote),a.elements.push({type:"JsdocTypeObjectField",key:T.value.toString(),right:void 0,optional:w,readonly:!1,meta:{quote:k}})}else if(T.type==="JsdocTypeObjectField"||T.type==="JsdocTypeJsdocObjectField")a.elements.push(T);else throw new m(T);if(r.lexer.current.startOfLine)c="linebreak";else if(r.consume(","))c="comma";else if(r.consume(";"))c="semicolon";else break;if(r.lexer.current.type==="}")break}if(a.meta.separator=c??"comma",!r.consume("}"))throw new Error("Unterminated record type. Missing '}'")}return a},"parsePrefix")})}n(me,"createObjectParslet");function fe({allowSquaredProperties:e,allowKeyTypes:t,allowReadonly:r,allowOptional:a}){return g({name:"objectFieldParslet",precedence:f.KEY_VALUE,accept:n(c=>c===":","accept"),parseInfix:n((c,d)=>{var T;let w=!1,S=!1;a&&d.type==="JsdocTypeNullable"&&(w=!0,d=d.element),r&&d.type==="JsdocTypeReadonlyProperty"&&(S=!0,d=d.element);const k=(T=c.baseParser)!==null&&T!==void 0?T:c;if(k.acceptLexerState(c),d.type==="JsdocTypeNumber"||d.type==="JsdocTypeName"||d.type==="JsdocTypeStringValue"||ce(d)){if(ce(d)&&!e)throw new m(d);k.consume(":");let I;d.type==="JsdocTypeStringValue"&&(I=d.meta.quote);const ne=k.parseType(f.KEY_VALUE);return c.acceptLexerState(k),{type:"JsdocTypeObjectField",key:ce(d)?d:d.value.toString(),right:ne,optional:w,readonly:S,meta:{quote:I}}}else{if(!t)throw new m(d);k.consume(":");const I=k.parseType(f.KEY_VALUE);return c.acceptLexerState(k),{type:"JsdocTypeJsdocObjectField",left:N(d),right:I}}},"parseInfix")})}n(fe,"createObjectFieldParslet");function Te({allowOptional:e,allowVariadic:t}){return g({name:"keyValueParslet",precedence:f.KEY_VALUE,accept:n(r=>r===":","accept"),parseInfix:n((r,a)=>{let c=!1,d=!1;if(e&&a.type==="JsdocTypeNullable"&&(c=!0,a=a.element),t&&a.type==="JsdocTypeVariadic"&&a.element!==void 0&&(d=!0,a=a.element),a.type!=="JsdocTypeName")throw new m(a);r.consume(":");const T=r.parseType(f.KEY_VALUE);return{type:"JsdocTypeKeyValue",key:a.value,right:T,optional:c,variadic:d}},"parseInfix")})}n(Te,"createKeyValueParslet");const Le=[...pe,ye({allowWithoutParenthesis:!0,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),q,Q({allowedTypes:["module","external","event"],pathGrammar:K}),de({allowEnclosingBrackets:!0,allowPostfix:!0}),R({allowedAdditionalTokens:["keyof"]}),Re,_e,H({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:K})],Vt=[...Le,me({objectFieldGrammar:[R({allowedAdditionalTokens:["module","in"]}),fe({allowSquaredProperties:!1,allowKeyTypes:!0,allowOptional:!1,allowReadonly:!1}),...Le],allowKeyTypes:!0}),Te({allowOptional:!0,allowVariadic:!0})],Fe=g({name:"typeOfParslet",accept:n(e=>e==="typeof","accept"),parsePrefix:n(e=>(e.consume("typeof"),{type:"JsdocTypeTypeof",element:N(e.parseType(f.KEY_OF_TYPE_OF))}),"parsePrefix")}),Kt=[R({allowedAdditionalTokens:["module","keyof","event","external","in"]}),le,W,q,X,fe({allowSquaredProperties:!1,allowKeyTypes:!1,allowOptional:!1,allowReadonly:!1})],$t=[...pe,me({allowKeyTypes:!1,objectFieldGrammar:Kt}),R({allowedAdditionalTokens:["event","external","in"]}),Fe,ye({allowWithoutParenthesis:!1,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),de({allowEnclosingBrackets:!1,allowPostfix:!1}),R({allowedAdditionalTokens:["keyof"]}),Q({allowedTypes:["module"],pathGrammar:K}),H({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:K}),Te({allowOptional:!1,allowVariadic:!1}),Re],Dt=g({name:"assertsParslet",accept:n(e=>e==="asserts","accept"),parsePrefix:n(e=>{e.consume("asserts");const t=e.parseIntermediateType(f.SYMBOL);if(t.type!=="JsdocTypeName")throw new m(t,"A typescript asserts always has to have a name on the left side.");return e.consume("is"),{type:"JsdocTypeAsserts",left:t,right:N(e.parseIntermediateType(f.INFIX))}},"parsePrefix")});function qt({allowQuestionMark:e}){return g({name:"tupleParslet",accept:n(t=>t==="[","accept"),parsePrefix:n(t=>{t.consume("[");const r={type:"JsdocTypeTuple",elements:[]};if(t.consume("]"))return r;const a=t.parseIntermediateType(f.ALL);if(a.type==="JsdocTypeParameterList"?a.elements[0].type==="JsdocTypeKeyValue"?r.elements=a.elements.map(G):r.elements=a.elements.map(N):a.type==="JsdocTypeKeyValue"?r.elements=[G(a)]:r.elements=[N(a)],!t.consume("]"))throw new Error("Unterminated '['");if(!e&&r.elements.some(c=>c.type==="JsdocTypeUnknown"))throw new Error("Question mark in tuple not allowed");return r},"parsePrefix")})}n(qt,"createTupleParslet");const Mt=g({name:"keyOfParslet",accept:n(e=>e==="keyof","accept"),parsePrefix:n(e=>(e.consume("keyof"),{type:"JsdocTypeKeyof",element:N(e.parseType(f.KEY_OF_TYPE_OF))}),"parsePrefix")}),Bt=g({name:"importParslet",accept:n(e=>e==="import","accept"),parsePrefix:n(e=>{if(e.consume("import"),!e.consume("("))throw new Error("Missing parenthesis after import keyword");const t=e.parseType(f.PREFIX);if(t.type!=="JsdocTypeStringValue")throw new Error("Only string values are allowed as paths for imports");if(!e.consume(")"))throw new Error("Missing closing parenthesis after import keyword");return{type:"JsdocTypeImport",element:t}},"parsePrefix")}),Ct=g({name:"readonlyPropertyParslet",accept:n(e=>e==="readonly","accept"),parsePrefix:n(e=>(e.consume("readonly"),{type:"JsdocTypeReadonlyProperty",element:e.parseType(f.KEY_VALUE)}),"parsePrefix")}),Yt=g({name:"arrowFunctionParslet",precedence:f.ARROW,accept:n(e=>e==="=>","accept"),parseInfix:n((e,t)=>(e.consume("=>"),{type:"JsdocTypeFunction",parameters:ue(t).map(It),arrow:!0,constructor:!1,parenthesis:!0,returnType:e.parseType(f.OBJECT)}),"parseInfix")}),Gt=g({name:"intersectionParslet",accept:n(e=>e==="&","accept"),precedence:f.INTERSECTION,parseInfix:n((e,t)=>{e.consume("&");const r=[];do r.push(e.parseType(f.INTERSECTION));while(e.consume("&"));return{type:"JsdocTypeIntersection",elements:[N(t),...r]}},"parseInfix")}),Wt=g({name:"predicateParslet",precedence:f.INFIX,accept:n(e=>e==="is","accept"),parseInfix:n((e,t)=>{if(t.type!=="JsdocTypeName")throw new m(t,"A typescript predicate always has to have a name on the left side.");return e.consume("is"),{type:"JsdocTypePredicate",left:t,right:N(e.parseIntermediateType(f.INFIX))}},"parseInfix")}),Xt=g({name:"objectSquareBracketPropertyParslet",accept:n(e=>e==="[","accept"),parsePrefix:n(e=>{if(e.baseParser===void 0)throw new Error("Only allowed inside object grammar");e.consume("[");const t=e.lexer.current.text;e.consume("Identifier");let r;if(e.consume(":")){const a=e.baseParser;a.acceptLexerState(e),r={type:"JsdocTypeIndexSignature",key:t,right:a.parseType(f.INDEX_BRACKETS)},e.acceptLexerState(a)}else if(e.consume("in")){const a=e.baseParser;a.acceptLexerState(e),r={type:"JsdocTypeMappedType",key:t,right:a.parseType(f.ARRAY_BRACKETS)},e.acceptLexerState(a)}else throw new Error("Missing ':' or 'in' inside square bracketed property.");if(!e.consume("]"))throw new Error("Unterminated square brackets");return r},"parsePrefix")}),Ht=[Ct,R({allowedAdditionalTokens:["module","event","keyof","event","external","in"]}),le,W,q,X,fe({allowSquaredProperties:!0,allowKeyTypes:!1,allowOptional:!0,allowReadonly:!0}),Xt],Qt=[...pe,me({allowKeyTypes:!1,objectFieldGrammar:Ht}),Fe,Mt,Bt,q,ye({allowWithoutParenthesis:!0,allowNoReturnType:!1,allowNamedParameters:["this","new","args"],allowNewAsFunctionKeyword:!0}),qt({allowQuestionMark:!1}),de({allowEnclosingBrackets:!1,allowPostfix:!1}),Dt,R({allowedAdditionalTokens:["event","external","in"]}),Q({allowedTypes:["module"],pathGrammar:K}),_e,Yt,H({allowSquareBracketsOnAnyType:!0,allowJsdocNamePaths:!1,pathGrammar:K}),Gt,Wt,Te({allowVariadic:!0,allowOptional:!0})];function je(e,t){switch(t){case"closure":return new A($t,e).parse();case"jsdoc":return new A(Vt,e).parse();case"typescript":return new A(Qt,e).parse()}}n(je,"parse");function zt(e,t=["typescript","closure","jsdoc"]){let r;for(const a of t)try{return je(e,a)}catch(c){r=c}throw r}n(zt,"tryParse");function M(e,t){const r=e[t.type];if(r===void 0)throw new Error(`In this set of transform rules exists no rule for type ${t.type}.`);return r(t,a=>M(e,a))}n(M,"transform");function x(e){throw new Error("This transform is not available. Are you trying the correct parsing mode?")}n(x,"notAvailableTransform");function Ue(e){const t={params:[]};for(const r of e.parameters)r.type==="JsdocTypeKeyValue"?r.key==="this"?t.this=r.right:r.key==="new"?t.new=r.right:t.params.push(r):t.params.push(r);return t}n(Ue,"extractSpecialParams");function z(e,t,r){return e==="prefix"?r+t:t+r}n(z,"applyPosition");function _(e,t){switch(t){case"double":return`"${e}"`;case"single":return`'${e}'`;case void 0:return e}}n(_,"quote");function Ve(){return{JsdocTypeParenthesis:n((e,t)=>`(${e.element!==void 0?t(e.element):""})`,"JsdocTypeParenthesis"),JsdocTypeKeyof:n((e,t)=>`keyof ${t(e.element)}`,"JsdocTypeKeyof"),JsdocTypeFunction:n((e,t)=>{if(e.arrow){if(e.returnType===void 0)throw new Error("Arrow function needs a return type.");let r=`(${e.parameters.map(t).join(", ")}) => ${t(e.returnType)}`;return e.constructor&&(r="new "+r),r}else{let r=e.constructor?"new":"function";return e.parenthesis&&(r+=`(${e.parameters.map(t).join(", ")})`,e.returnType!==void 0&&(r+=`: ${t(e.returnType)}`)),r}},"JsdocTypeFunction"),JsdocTypeName:n(e=>e.value,"JsdocTypeName"),JsdocTypeTuple:n((e,t)=>`[${e.elements.map(t).join(", ")}]`,"JsdocTypeTuple"),JsdocTypeVariadic:n((e,t)=>e.meta.position===void 0?"...":z(e.meta.position,t(e.element),"..."),"JsdocTypeVariadic"),JsdocTypeNamePath:n((e,t)=>{const r=t(e.left),a=t(e.right);switch(e.pathType){case"inner":return`${r}~${a}`;case"instance":return`${r}#${a}`;case"property":return`${r}.${a}`;case"property-brackets":return`${r}[${a}]`}},"JsdocTypeNamePath"),JsdocTypeStringValue:n(e=>_(e.value,e.meta.quote),"JsdocTypeStringValue"),JsdocTypeAny:n(()=>"*","JsdocTypeAny"),JsdocTypeGeneric:n((e,t)=>{if(e.meta.brackets==="square"){const r=e.elements[0],a=t(r);return r.type==="JsdocTypeUnion"||r.type==="JsdocTypeIntersection"?`(${a})[]`:`${a}[]`}else return`${t(e.left)}${e.meta.dot?".":""}<${e.elements.map(t).join(", ")}>`},"JsdocTypeGeneric"),JsdocTypeImport:n((e,t)=>`import(${t(e.element)})`,"JsdocTypeImport"),JsdocTypeObjectField:n((e,t)=>{let r="";return e.readonly&&(r+="readonly "),typeof e.key=="string"?r+=_(e.key,e.meta.quote):r+=t(e.key),e.optional&&(r+="?"),e.right===void 0?r:r+`: ${t(e.right)}`},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:n((e,t)=>`${t(e.left)}: ${t(e.right)}`,"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:n((e,t)=>{let r=e.key;return e.optional&&(r+="?"),e.variadic&&(r="..."+r),e.right===void 0?r:r+`: ${t(e.right)}`},"JsdocTypeKeyValue"),JsdocTypeSpecialNamePath:n(e=>`${e.specialType}:${_(e.value,e.meta.quote)}`,"JsdocTypeSpecialNamePath"),JsdocTypeNotNullable:n((e,t)=>z(e.meta.position,t(e.element),"!"),"JsdocTypeNotNullable"),JsdocTypeNull:n(()=>"null","JsdocTypeNull"),JsdocTypeNullable:n((e,t)=>z(e.meta.position,t(e.element),"?"),"JsdocTypeNullable"),JsdocTypeNumber:n(e=>e.value.toString(),"JsdocTypeNumber"),JsdocTypeObject:n((e,t)=>`{${e.elements.map(t).join((e.meta.separator==="comma"?",":";")+" ")}}`,"JsdocTypeObject"),JsdocTypeOptional:n((e,t)=>z(e.meta.position,t(e.element),"="),"JsdocTypeOptional"),JsdocTypeSymbol:n((e,t)=>`${e.value}(${e.element!==void 0?t(e.element):""})`,"JsdocTypeSymbol"),JsdocTypeTypeof:n((e,t)=>`typeof ${t(e.element)}`,"JsdocTypeTypeof"),JsdocTypeUndefined:n(()=>"undefined","JsdocTypeUndefined"),JsdocTypeUnion:n((e,t)=>e.elements.map(t).join(" | "),"JsdocTypeUnion"),JsdocTypeUnknown:n(()=>"?","JsdocTypeUnknown"),JsdocTypeIntersection:n((e,t)=>e.elements.map(t).join(" & "),"JsdocTypeIntersection"),JsdocTypeProperty:n(e=>_(e.value,e.meta.quote),"JsdocTypeProperty"),JsdocTypePredicate:n((e,t)=>`${t(e.left)} is ${t(e.right)}`,"JsdocTypePredicate"),JsdocTypeIndexSignature:n((e,t)=>`[${e.key}: ${t(e.right)}]`,"JsdocTypeIndexSignature"),JsdocTypeMappedType:n((e,t)=>`[${e.key} in ${t(e.right)}]`,"JsdocTypeMappedType"),JsdocTypeAsserts:n((e,t)=>`asserts ${t(e.left)} is ${t(e.right)}`,"JsdocTypeAsserts")}}n(Ve,"stringifyRules");const Zt=Ve();function en(e){return M(Zt,e)}n(en,"stringify");const tn=["null","true","false","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield"];function L(e){const t={type:"NameExpression",name:e};return tn.includes(e)&&(t.reservedWord=!0),t}n(L,"makeName");const nn={JsdocTypeOptional:n((e,t)=>{const r=t(e.element);return r.optional=!0,r},"JsdocTypeOptional"),JsdocTypeNullable:n((e,t)=>{const r=t(e.element);return r.nullable=!0,r},"JsdocTypeNullable"),JsdocTypeNotNullable:n((e,t)=>{const r=t(e.element);return r.nullable=!1,r},"JsdocTypeNotNullable"),JsdocTypeVariadic:n((e,t)=>{if(e.element===void 0)throw new Error("dots without value are not allowed in catharsis mode");const r=t(e.element);return r.repeatable=!0,r},"JsdocTypeVariadic"),JsdocTypeAny:n(()=>({type:"AllLiteral"}),"JsdocTypeAny"),JsdocTypeNull:n(()=>({type:"NullLiteral"}),"JsdocTypeNull"),JsdocTypeStringValue:n(e=>L(_(e.value,e.meta.quote)),"JsdocTypeStringValue"),JsdocTypeUndefined:n(()=>({type:"UndefinedLiteral"}),"JsdocTypeUndefined"),JsdocTypeUnknown:n(()=>({type:"UnknownLiteral"}),"JsdocTypeUnknown"),JsdocTypeFunction:n((e,t)=>{const r=Ue(e),a={type:"FunctionType",params:r.params.map(t)};return r.this!==void 0&&(a.this=t(r.this)),r.new!==void 0&&(a.new=t(r.new)),e.returnType!==void 0&&(a.result=t(e.returnType)),a},"JsdocTypeFunction"),JsdocTypeGeneric:n((e,t)=>({type:"TypeApplication",applications:e.elements.map(r=>t(r)),expression:t(e.left)}),"JsdocTypeGeneric"),JsdocTypeSpecialNamePath:n(e=>L(e.specialType+":"+_(e.value,e.meta.quote)),"JsdocTypeSpecialNamePath"),JsdocTypeName:n(e=>e.value!=="function"?L(e.value):{type:"FunctionType",params:[]},"JsdocTypeName"),JsdocTypeNumber:n(e=>L(e.value.toString()),"JsdocTypeNumber"),JsdocTypeObject:n((e,t)=>{const r={type:"RecordType",fields:[]};for(const a of e.elements)a.type!=="JsdocTypeObjectField"&&a.type!=="JsdocTypeJsdocObjectField"?r.fields.push({type:"FieldType",key:t(a),value:void 0}):r.fields.push(t(a));return r},"JsdocTypeObject"),JsdocTypeObjectField:n((e,t)=>{if(typeof e.key!="string")throw new Error("Index signatures and mapped types are not supported");return{type:"FieldType",key:L(_(e.key,e.meta.quote)),value:e.right===void 0?void 0:t(e.right)}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:n((e,t)=>({type:"FieldType",key:t(e.left),value:t(e.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeUnion:n((e,t)=>({type:"TypeUnion",elements:e.elements.map(r=>t(r))}),"JsdocTypeUnion"),JsdocTypeKeyValue:n((e,t)=>({type:"FieldType",key:L(e.key),value:e.right===void 0?void 0:t(e.right)}),"JsdocTypeKeyValue"),JsdocTypeNamePath:n((e,t)=>{const r=t(e.left);let a;e.right.type==="JsdocTypeSpecialNamePath"?a=t(e.right).name:a=_(e.right.value,e.right.meta.quote);const c=e.pathType==="inner"?"~":e.pathType==="instance"?"#":".";return L(`${r.name}${c}${a}`)},"JsdocTypeNamePath"),JsdocTypeSymbol:n(e=>{let t="",r=e.element,a=!1;return(r==null?void 0:r.type)==="JsdocTypeVariadic"&&(r.meta.position==="prefix"?t="...":a=!0,r=r.element),(r==null?void 0:r.type)==="JsdocTypeName"?t+=r.value:(r==null?void 0:r.type)==="JsdocTypeNumber"&&(t+=r.value.toString()),a&&(t+="..."),L(`${e.value}(${t})`)},"JsdocTypeSymbol"),JsdocTypeParenthesis:n((e,t)=>t(N(e.element)),"JsdocTypeParenthesis"),JsdocTypeMappedType:x,JsdocTypeIndexSignature:x,JsdocTypeImport:x,JsdocTypeKeyof:x,JsdocTypeTuple:x,JsdocTypeTypeof:x,JsdocTypeIntersection:x,JsdocTypeProperty:x,JsdocTypePredicate:x,JsdocTypeAsserts:x};function rn(e){return M(nn,e)}n(rn,"catharsisTransform");function U(e){switch(e){case void 0:return"none";case"single":return"single";case"double":return"double"}}n(U,"getQuoteStyle");function on(e){switch(e){case"inner":return"INNER_MEMBER";case"instance":return"INSTANCE_MEMBER";case"property":return"MEMBER";case"property-brackets":return"MEMBER"}}n(on,"getMemberType");function he(e,t){return t.length===2?{type:e,left:t[0],right:t[1]}:{type:e,left:t[0],right:he(e,t.slice(1))}}n(he,"nestResults");const sn={JsdocTypeOptional:n((e,t)=>({type:"OPTIONAL",value:t(e.element),meta:{syntax:e.meta.position==="prefix"?"PREFIX_EQUAL_SIGN":"SUFFIX_EQUALS_SIGN"}}),"JsdocTypeOptional"),JsdocTypeNullable:n((e,t)=>({type:"NULLABLE",value:t(e.element),meta:{syntax:e.meta.position==="prefix"?"PREFIX_QUESTION_MARK":"SUFFIX_QUESTION_MARK"}}),"JsdocTypeNullable"),JsdocTypeNotNullable:n((e,t)=>({type:"NOT_NULLABLE",value:t(e.element),meta:{syntax:e.meta.position==="prefix"?"PREFIX_BANG":"SUFFIX_BANG"}}),"JsdocTypeNotNullable"),JsdocTypeVariadic:n((e,t)=>{const r={type:"VARIADIC",meta:{syntax:e.meta.position==="prefix"?"PREFIX_DOTS":e.meta.position==="suffix"?"SUFFIX_DOTS":"ONLY_DOTS"}};return e.element!==void 0&&(r.value=t(e.element)),r},"JsdocTypeVariadic"),JsdocTypeName:n(e=>({type:"NAME",name:e.value}),"JsdocTypeName"),JsdocTypeTypeof:n((e,t)=>({type:"TYPE_QUERY",name:t(e.element)}),"JsdocTypeTypeof"),JsdocTypeTuple:n((e,t)=>({type:"TUPLE",entries:e.elements.map(t)}),"JsdocTypeTuple"),JsdocTypeKeyof:n((e,t)=>({type:"KEY_QUERY",value:t(e.element)}),"JsdocTypeKeyof"),JsdocTypeImport:n(e=>({type:"IMPORT",path:{type:"STRING_VALUE",quoteStyle:U(e.element.meta.quote),string:e.element.value}}),"JsdocTypeImport"),JsdocTypeUndefined:n(()=>({type:"NAME",name:"undefined"}),"JsdocTypeUndefined"),JsdocTypeAny:n(()=>({type:"ANY"}),"JsdocTypeAny"),JsdocTypeFunction:n((e,t)=>{const r=Ue(e),a={type:e.arrow?"ARROW":"FUNCTION",params:r.params.map(c=>{if(c.type==="JsdocTypeKeyValue"){if(c.right===void 0)throw new Error("Function parameter without ':' is not expected to be 'KEY_VALUE'");return{type:"NAMED_PARAMETER",name:c.key,typeName:t(c.right)}}else return t(c)}),new:null,returns:null};return r.this!==void 0?a.this=t(r.this):e.arrow||(a.this=null),r.new!==void 0&&(a.new=t(r.new)),e.returnType!==void 0&&(a.returns=t(e.returnType)),a},"JsdocTypeFunction"),JsdocTypeGeneric:n((e,t)=>{const r={type:"GENERIC",subject:t(e.left),objects:e.elements.map(t),meta:{syntax:e.meta.brackets==="square"?"SQUARE_BRACKET":e.meta.dot?"ANGLE_BRACKET_WITH_DOT":"ANGLE_BRACKET"}};return e.meta.brackets==="square"&&e.elements[0].type==="JsdocTypeFunction"&&!e.elements[0].parenthesis&&(r.objects[0]={type:"NAME",name:"function"}),r},"JsdocTypeGeneric"),JsdocTypeObjectField:n((e,t)=>{if(typeof e.key!="string")throw new Error("Index signatures and mapped types are not supported");if(e.right===void 0)return{type:"RECORD_ENTRY",key:e.key,quoteStyle:U(e.meta.quote),value:null,readonly:!1};let r=t(e.right);return e.optional&&(r={type:"OPTIONAL",value:r,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:e.key.toString(),quoteStyle:U(e.meta.quote),value:r,readonly:!1}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:n(()=>{throw new Error("Keys may not be typed in jsdoctypeparser.")},"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:n((e,t)=>{if(e.right===void 0)return{type:"RECORD_ENTRY",key:e.key,quoteStyle:"none",value:null,readonly:!1};let r=t(e.right);return e.optional&&(r={type:"OPTIONAL",value:r,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:e.key,quoteStyle:"none",value:r,readonly:!1}},"JsdocTypeKeyValue"),JsdocTypeObject:n((e,t)=>{const r=[];for(const a of e.elements)(a.type==="JsdocTypeObjectField"||a.type==="JsdocTypeJsdocObjectField")&&r.push(t(a));return{type:"RECORD",entries:r}},"JsdocTypeObject"),JsdocTypeSpecialNamePath:n(e=>{if(e.specialType!=="module")throw new Error(`jsdoctypeparser does not support type ${e.specialType} at this point.`);return{type:"MODULE",value:{type:"FILE_PATH",quoteStyle:U(e.meta.quote),path:e.value}}},"JsdocTypeSpecialNamePath"),JsdocTypeNamePath:n((e,t)=>{let r=!1,a,c;e.right.type==="JsdocTypeSpecialNamePath"&&e.right.specialType==="event"?(r=!0,a=e.right.value,c=U(e.right.meta.quote)):(a=e.right.value,c=U(e.right.meta.quote));const d={type:on(e.pathType),owner:t(e.left),name:a,quoteStyle:c,hasEventPrefix:r};if(d.owner.type==="MODULE"){const T=d.owner;return d.owner=d.owner.value,T.value=d,T}else return d},"JsdocTypeNamePath"),JsdocTypeUnion:n((e,t)=>he("UNION",e.elements.map(t)),"JsdocTypeUnion"),JsdocTypeParenthesis:n((e,t)=>({type:"PARENTHESIS",value:t(N(e.element))}),"JsdocTypeParenthesis"),JsdocTypeNull:n(()=>({type:"NAME",name:"null"}),"JsdocTypeNull"),JsdocTypeUnknown:n(()=>({type:"UNKNOWN"}),"JsdocTypeUnknown"),JsdocTypeStringValue:n(e=>({type:"STRING_VALUE",quoteStyle:U(e.meta.quote),string:e.value}),"JsdocTypeStringValue"),JsdocTypeIntersection:n((e,t)=>he("INTERSECTION",e.elements.map(t)),"JsdocTypeIntersection"),JsdocTypeNumber:n(e=>({type:"NUMBER_VALUE",number:e.value.toString()}),"JsdocTypeNumber"),JsdocTypeSymbol:x,JsdocTypeProperty:x,JsdocTypePredicate:x,JsdocTypeMappedType:x,JsdocTypeIndexSignature:x,JsdocTypeAsserts:x};function an(e){return M(sn,e)}n(an,"jtpTransform");function cn(){return{JsdocTypeIntersection:n((e,t)=>({type:"JsdocTypeIntersection",elements:e.elements.map(t)}),"JsdocTypeIntersection"),JsdocTypeGeneric:n((e,t)=>({type:"JsdocTypeGeneric",left:t(e.left),elements:e.elements.map(t),meta:{dot:e.meta.dot,brackets:e.meta.brackets}}),"JsdocTypeGeneric"),JsdocTypeNullable:n(e=>e,"JsdocTypeNullable"),JsdocTypeUnion:n((e,t)=>({type:"JsdocTypeUnion",elements:e.elements.map(t)}),"JsdocTypeUnion"),JsdocTypeUnknown:n(e=>e,"JsdocTypeUnknown"),JsdocTypeUndefined:n(e=>e,"JsdocTypeUndefined"),JsdocTypeTypeof:n((e,t)=>({type:"JsdocTypeTypeof",element:t(e.element)}),"JsdocTypeTypeof"),JsdocTypeSymbol:n((e,t)=>{const r={type:"JsdocTypeSymbol",value:e.value};return e.element!==void 0&&(r.element=t(e.element)),r},"JsdocTypeSymbol"),JsdocTypeOptional:n((e,t)=>({type:"JsdocTypeOptional",element:t(e.element),meta:{position:e.meta.position}}),"JsdocTypeOptional"),JsdocTypeObject:n((e,t)=>({type:"JsdocTypeObject",meta:{separator:"comma"},elements:e.elements.map(t)}),"JsdocTypeObject"),JsdocTypeNumber:n(e=>e,"JsdocTypeNumber"),JsdocTypeNull:n(e=>e,"JsdocTypeNull"),JsdocTypeNotNullable:n((e,t)=>({type:"JsdocTypeNotNullable",element:t(e.element),meta:{position:e.meta.position}}),"JsdocTypeNotNullable"),JsdocTypeSpecialNamePath:n(e=>e,"JsdocTypeSpecialNamePath"),JsdocTypeObjectField:n((e,t)=>({type:"JsdocTypeObjectField",key:e.key,right:e.right===void 0?void 0:t(e.right),optional:e.optional,readonly:e.readonly,meta:e.meta}),"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:n((e,t)=>({type:"JsdocTypeJsdocObjectField",left:t(e.left),right:t(e.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:n((e,t)=>({type:"JsdocTypeKeyValue",key:e.key,right:e.right===void 0?void 0:t(e.right),optional:e.optional,variadic:e.variadic}),"JsdocTypeKeyValue"),JsdocTypeImport:n((e,t)=>({type:"JsdocTypeImport",element:t(e.element)}),"JsdocTypeImport"),JsdocTypeAny:n(e=>e,"JsdocTypeAny"),JsdocTypeStringValue:n(e=>e,"JsdocTypeStringValue"),JsdocTypeNamePath:n(e=>e,"JsdocTypeNamePath"),JsdocTypeVariadic:n((e,t)=>{const r={type:"JsdocTypeVariadic",meta:{position:e.meta.position,squareBrackets:e.meta.squareBrackets}};return e.element!==void 0&&(r.element=t(e.element)),r},"JsdocTypeVariadic"),JsdocTypeTuple:n((e,t)=>({type:"JsdocTypeTuple",elements:e.elements.map(t)}),"JsdocTypeTuple"),JsdocTypeName:n(e=>e,"JsdocTypeName"),JsdocTypeFunction:n((e,t)=>{const r={type:"JsdocTypeFunction",arrow:e.arrow,parameters:e.parameters.map(t),constructor:e.constructor,parenthesis:e.parenthesis};return e.returnType!==void 0&&(r.returnType=t(e.returnType)),r},"JsdocTypeFunction"),JsdocTypeKeyof:n((e,t)=>({type:"JsdocTypeKeyof",element:t(e.element)}),"JsdocTypeKeyof"),JsdocTypeParenthesis:n((e,t)=>({type:"JsdocTypeParenthesis",element:t(e.element)}),"JsdocTypeParenthesis"),JsdocTypeProperty:n(e=>e,"JsdocTypeProperty"),JsdocTypePredicate:n((e,t)=>({type:"JsdocTypePredicate",left:t(e.left),right:t(e.right)}),"JsdocTypePredicate"),JsdocTypeIndexSignature:n((e,t)=>({type:"JsdocTypeIndexSignature",key:e.key,right:t(e.right)}),"JsdocTypeIndexSignature"),JsdocTypeMappedType:n((e,t)=>({type:"JsdocTypeMappedType",key:e.key,right:t(e.right)}),"JsdocTypeMappedType"),JsdocTypeAsserts:n((e,t)=>({type:"JsdocTypeAsserts",left:t(e.left),right:t(e.right)}),"JsdocTypeAsserts")}}n(cn,"identityTransformRules");const Ke={JsdocTypeAny:[],JsdocTypeFunction:["parameters","returnType"],JsdocTypeGeneric:["left","elements"],JsdocTypeImport:[],JsdocTypeIndexSignature:["right"],JsdocTypeIntersection:["elements"],JsdocTypeKeyof:["element"],JsdocTypeKeyValue:["right"],JsdocTypeMappedType:["right"],JsdocTypeName:[],JsdocTypeNamePath:["left","right"],JsdocTypeNotNullable:["element"],JsdocTypeNull:[],JsdocTypeNullable:["element"],JsdocTypeNumber:[],JsdocTypeObject:["elements"],JsdocTypeObjectField:["right"],JsdocTypeJsdocObjectField:["left","right"],JsdocTypeOptional:["element"],JsdocTypeParenthesis:["element"],JsdocTypeSpecialNamePath:[],JsdocTypeStringValue:[],JsdocTypeSymbol:["element"],JsdocTypeTuple:["elements"],JsdocTypeTypeof:["element"],JsdocTypeUndefined:[],JsdocTypeUnion:["elements"],JsdocTypeUnknown:[],JsdocTypeVariadic:["element"],JsdocTypeProperty:[],JsdocTypePredicate:["left","right"],JsdocTypeAsserts:["left","right"]};function Je(e,t,r,a,c){a==null||a(e,t,r);const d=Ke[e.type];for(const T of d){const w=e[T];if(w!==void 0)if(Array.isArray(w))for(const S of w)Je(S,e,T,a,c);else Je(w,e,T,a,c)}c==null||c(e,t,r)}n(Je,"_traverse");function ln(e,t,r){Je(e,void 0,void 0,t,r)}n(ln,"traverse"),i.catharsisTransform=rn,i.identityTransformRules=cn,i.jtpTransform=an,i.parse=je,i.stringify=en,i.stringifyRules=Ve,i.transform=M,i.traverse=ln,i.tryParse=zt,i.visitorKeys=Ke})})(we,we.exports);var Ne=we.exports,yn=Object.defineProperty,l=n((o,s)=>yn(o,"name",{value:s,configurable:!0}),"o");__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__;function dn(o,s){let i={},p=Object.keys(o);for(let u=0;u<p.length;u++){let y=p[u],m=o[y];i[y]=s(m,y,o)}return i}n(dn,"j");l(dn,"mapValues");__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__;var mn=["null","undefined"];function re(o){return mn.some(s=>s===o)}n(re,"T");l(re,"isDefaultValueBlacklisted");var fn=l(o=>{if(!o)return"";if(typeof o=="string")return o;throw new Error(`Description: expected string, got: ${JSON.stringify(o)}`)},"str");function Ee(o){return!!o.__docgenInfo}n(Ee,"z");l(Ee,"hasDocgen");function Tn(o){return o!=null&&Object.keys(o).length>0}n(Tn,"$");l(Tn,"isValidDocgenSection");function hn(o,s){return Ee(o)?o.__docgenInfo[s]:null}n(hn,"Y");l(hn,"getDocgenSection");function qe(o){return Ee(o)?fn(o.__docgenInfo.description):""}n(qe,"q");l(qe,"getDocgenDescription");var F;(function(o){o.start="/**",o.nostart="/***",o.delim="*",o.end="*/"})(F=F||(F={}));function Me(o){return/^\s+$/.test(o)}n(Me,"k");l(Me,"isSpace");function Be(o){let s=o.match(/\r+$/);return s==null?["",o]:[o.slice(-s[0].length),o.slice(0,-s[0].length)]}n(Be,"G");l(Be,"splitCR");function V(o){let s=o.match(/^\s+/);return s==null?["",o]:[o.slice(0,s[0].length),o.slice(s[0].length)]}n(V,"y");l(V,"splitSpace");function Ce(o){return o.split(/\n/)}n(Ce,"K");l(Ce,"splitLines");function Ye(o={}){return Object.assign({tag:"",name:"",type:"",optional:!1,description:"",problems:[],source:[]},o)}n(Ye,"X");l(Ye,"seedSpec");function Ge(o={}){return Object.assign({start:"",delimiter:"",postDelimiter:"",tag:"",postTag:"",name:"",postName:"",type:"",postType:"",description:"",end:"",lineEnd:""},o)}n(Ge,"F");l(Ge,"seedTokens");var Jn=/^@\S+/;function We({fence:o="```"}={}){let s=Xe(o),i=l((p,u)=>s(p)?!u:u,"toggleFence");return l(function(p){let u=[[]],y=!1;for(let m of p)Jn.test(m.tokens.description)&&!y?u.push([m]):u[u.length-1].push(m),y=i(m.tokens.description,y);return u},"parseBlock")}n(We,"J");l(We,"getParser");function Xe(o){return typeof o=="string"?s=>s.split(o).length%2===0:o}n(Xe,"Je");l(Xe,"getFencer");function He({startLine:o=0,markers:s=F}={}){let i=null,p=o;return l(function(u){let y=u,m=Ge();if([m.lineEnd,y]=Be(y),[m.start,y]=V(y),i===null&&y.startsWith(s.start)&&!y.startsWith(s.nostart)&&(i=[],m.delimiter=y.slice(0,s.start.length),y=y.slice(s.start.length),[m.postDelimiter,y]=V(y)),i===null)return p++,null;let h=y.trimRight().endsWith(s.end);if(m.delimiter===""&&y.startsWith(s.delim)&&!y.startsWith(s.end)&&(m.delimiter=s.delim,y=y.slice(s.delim.length),[m.postDelimiter,y]=V(y)),h){let J=y.trimRight();m.end=y.slice(J.length-s.end.length),y=J.slice(0,-s.end.length)}if(m.description=y,i.push({number:p,source:u,tokens:m}),p++,h){let J=i.slice();return i=null,J}return null},"parseSource")}n(He,"N");l(He,"getParser");function Qe({tokenizers:o}){return l(function(s){var i;let p=Ye({source:s});for(let u of o)if(p=u(p),!((i=p.problems[p.problems.length-1])===null||i===void 0)&&i.critical)break;return p},"parseSpec")}n(Qe,"R");l(Qe,"getParser");function ze(){return o=>{let{tokens:s}=o.source[0],i=s.description.match(/\s*(@(\S+))(\s*)/);return i===null?(o.problems.push({code:"spec:tag:prefix",message:'tag should start with "@" symbol',line:o.source[0].number,critical:!0}),o):(s.tag=i[1],s.postTag=i[3],s.description=s.description.slice(i[0].length),o.tag=i[2],o)}}n(ze,"P");l(ze,"tagTokenizer");function Ze(o="compact"){let s=et(o);return i=>{let p=0,u=[];for(let[h,{tokens:J}]of i.source.entries()){let O="";if(h===0&&J.description[0]!=="{")return i;for(let P of J.description)if(P==="{"&&p++,P==="}"&&p--,O+=P,p===0)break;if(u.push([J,O]),p===0)break}if(p!==0)return i.problems.push({code:"spec:type:unpaired-curlies",message:"unpaired curlies",line:i.source[0].number,critical:!0}),i;let y=[],m=u[0][0].postDelimiter.length;for(let[h,[J,O]]of u.entries())J.type=O,h>0&&(J.type=J.postDelimiter.slice(m)+O,J.postDelimiter=J.postDelimiter.slice(0,m)),[J.postType,J.description]=V(J.description.slice(O.length)),y.push(J.type);return y[0]=y[0].slice(1),y[y.length-1]=y[y.length-1].slice(0,-1),i.type=s(y),i}}n(Ze,"S");l(Ze,"typeTokenizer");var gn=l(o=>o.trim(),"trim");function et(o){return o==="compact"?s=>s.map(gn).join(""):o==="preserve"?s=>s.join(`
`):o}n(et,"Re");l(et,"getJoiner");var wn=l(o=>o&&o.startsWith('"')&&o.endsWith('"'),"isQuoted");function tt(){let o=l((s,{tokens:i},p)=>i.type===""?s:p,"typeEnd");return s=>{let{tokens:i}=s.source[s.source.reduce(o,0)],p=i.description.trimLeft(),u=p.split('"');if(u.length>1&&u[0]===""&&u.length%2===1)return s.name=u[1],i.name=`"${u[1]}"`,[i.postName,i.description]=V(p.slice(i.name.length)),s;let y=0,m="",h=!1,J;for(let P of p){if(y===0&&Me(P))break;P==="["&&y++,P==="]"&&y--,m+=P}if(y!==0)return s.problems.push({code:"spec:name:unpaired-brackets",message:"unpaired brackets",line:s.source[0].number,critical:!0}),s;let O=m;if(m[0]==="["&&m[m.length-1]==="]"){h=!0,m=m.slice(1,-1);let P=m.split("=");if(m=P[0].trim(),P[1]!==void 0&&(J=P.slice(1).join("=").trim()),m==="")return s.problems.push({code:"spec:name:empty-name",message:"empty name",line:s.source[0].number,critical:!0}),s;if(J==="")return s.problems.push({code:"spec:name:empty-default",message:"empty default value",line:s.source[0].number,critical:!0}),s;if(!wn(J)&&/=(?!>)/.test(J))return s.problems.push({code:"spec:name:invalid-default",message:"invalid default value syntax",line:s.source[0].number,critical:!0}),s}return s.optional=h,s.name=m,i.name=O,J!==void 0&&(s.default=J),[i.postName,i.description]=V(p.slice(i.name.length)),s}}n(tt,"O");l(tt,"nameTokenizer");function nt(o="compact",s=F){let i=Pe(o);return p=>(p.description=i(p.source,s),p)}n(nt,"v");l(nt,"descriptionTokenizer");function Pe(o){return o==="compact"?rt:o==="preserve"?ot:o}n(Pe,"A");l(Pe,"getJoiner");function rt(o,s=F){return o.map(({tokens:{description:i}})=>i.trim()).filter(i=>i!=="").join(" ")}n(rt,"Ve");l(rt,"compactJoiner");var Nn=l((o,{tokens:s},i)=>s.type===""?o:i,"lineNo"),En=l(({tokens:o})=>(o.delimiter===""?o.start:o.postDelimiter.slice(1))+o.description,"getDescription");function ot(o,s=F){if(o.length===0)return"";o[0].tokens.description===""&&o[0].tokens.delimiter===s.start&&(o=o.slice(1));let i=o[o.length-1];return i!==void 0&&i.tokens.description===""&&i.tokens.end.endsWith(s.end)&&(o=o.slice(0,-1)),o=o.slice(o.reduce(Nn,0)),o.map(En).join(`
`)}n(ot,"Be");l(ot,"preserveJoiner");function st({startLine:o=0,fence:s="```",spacing:i="compact",markers:p=F,tokenizers:u=[ze(),Ze(i),tt(),nt(i)]}={}){if(o<0||o%1>0)throw new Error("Invalid startLine");let y=He({startLine:o,markers:p}),m=We({fence:s}),h=Qe({tokenizers:u}),J=Pe(i);return function(O){let P=[];for(let oe of Ce(O)){let D=y(oe);if(D===null)continue;let C=m(D),Y=C.slice(1).map(h);P.push({description:J(C[0],p),tags:Y,source:D,problems:Y.reduce((b,se)=>b.concat(se.problems),[])})}return P}}n(st,"V");l(st,"getParser");function at(o){return o.start+o.delimiter+o.postDelimiter+o.tag+o.postTag+o.type+o.postType+o.name+o.postName+o.description+o.end+o.lineEnd}n(at,"Ie");l(at,"join");function Pn(){return o=>o.source.map(({tokens:s})=>at(s)).join(`
`)}n(Pn,"C");l(Pn,"getStringifier");function it(o,s={}){return st(s)(o)}n(it,"H");l(it,"parse");function ct(o){return o!=null&&o.includes("@")}n(ct,"ze");l(ct,"containsJsDoc");function lt(o){let s=`/**
`+(o??"").split(`
`).map(p=>` * ${p}`).join(`
`)+`
*/`,i=it(s,{spacing:"preserve"});if(!i||i.length===0)throw new Error("Cannot parse JSDoc tags.");return i[0]}n(lt,"$e");l(lt,"parse");var bn={tags:["param","arg","argument","returns","ignore","deprecated"]},kn=l((o,s=bn)=>{if(!ct(o))return{includesJsDoc:!1,ignore:!1};let i=lt(o),p=pt(i,s.tags);return p.ignore?{includesJsDoc:!0,ignore:!0}:{includesJsDoc:!0,ignore:!1,description:i.description.trim(),extractedTags:p}},"parseJsDoc");function pt(o,s){let i={params:null,deprecated:null,returns:null,ignore:!1};for(let p of o.tags)if(!(s!==void 0&&!s.includes(p.tag)))if(p.tag==="ignore"){i.ignore=!0;break}else switch(p.tag){case"param":case"arg":case"argument":{let u=yt(p);u!=null&&(i.params==null&&(i.params=[]),i.params.push(u));break}case"deprecated":{let u=dt(p);u!=null&&(i.deprecated=u);break}case"returns":{let u=mt(p);u!=null&&(i.returns=u);break}}return i}n(pt,"qe");l(pt,"extractJsDocTags");function ut(o){return o.replace(/[\.-]$/,"")}n(ut,"Ge");l(ut,"normaliseParamName");function yt(o){if(!o.name||o.name==="-")return null;let s=xe(o.type);return{name:o.name,type:s,description:ke(o.description),getPrettyName:l(()=>ut(o.name),"getPrettyName"),getTypeName:l(()=>s?Se(s):null,"getTypeName")}}n(yt,"Ke");l(yt,"extractParam");function dt(o){return o.name?be(o.name,o.description):null}n(dt,"Xe");l(dt,"extractDeprecated");function be(o,s){let i=o===""?s:`${o} ${s}`;return ke(i)}n(be,"Z");l(be,"joinNameAndDescription");function ke(o){let s=o.replace(/^- /g,"").trim();return s===""?null:s}n(ke,"ee");l(ke,"normaliseDescription");function mt(o){let s=xe(o.type);return s?{type:s,description:be(o.name,o.description),getTypeName:l(()=>Se(s),"getTypeName")}:null}n(mt,"He");l(mt,"extractReturns");var j=Ne.stringifyRules(),xn=j.JsdocTypeObject;j.JsdocTypeAny=()=>"any";j.JsdocTypeObject=(o,s)=>`(${xn(o,s)})`;j.JsdocTypeOptional=(o,s)=>s(o.element);j.JsdocTypeNullable=(o,s)=>s(o.element);j.JsdocTypeNotNullable=(o,s)=>s(o.element);j.JsdocTypeUnion=(o,s)=>o.elements.map(s).join("|");function xe(o){try{return Ne.parse(o,"typescript")}catch{return null}}n(xe,"te");l(xe,"extractType");function Se(o){return Ne.transform(j,o)}n(Se,"re");l(Se,"extractTypeName");function Oe(o){return o.length>90}n(Oe,"B");l(Oe,"isTooLongForTypeSummary");function ft(o){return o.length>50}n(ft,"oe");l(ft,"isTooLongForDefaultValueSummary");function E(o,s){return o===s?{summary:o}:{summary:o,detail:s}}n(E,"l");l(E,"createSummaryValue");function Sn(o,s){if(o!=null){let{value:i}=o;if(!re(i))return ft(i)?E(s==null?void 0:s.name,i):E(i)}return null}n(Sn,"ne");l(Sn,"createDefaultValue");function Ie({name:o,value:s,elements:i,raw:p}){return s??(i!=null?i.map(Ie).join(" | "):p??o)}n(Ie,"se");l(Ie,"generateUnionElement");function Tt({name:o,raw:s,elements:i}){return i!=null?E(i.map(Ie).join(" | ")):s!=null?E(s.replace(/^\|\s*/,"")):E(o)}n(Tt,"Ze");l(Tt,"generateUnion");function ht({type:o,raw:s}){return s!=null?E(s):E(o)}n(ht,"et");l(ht,"generateFuncSignature");function Jt({type:o,raw:s}){return s!=null?Oe(s)?E(o,s):E(s):E(o)}n(Jt,"tt");l(Jt,"generateObjectSignature");function gt(o){let{type:s}=o;return s==="object"?Jt(o):ht(o)}n(gt,"rt");l(gt,"generateSignature");function wt({name:o,raw:s}){return s!=null?Oe(s)?E(o,s):E(s):E(o)}n(wt,"ot");l(wt,"generateDefault");function On(o){if(o==null)return null;switch(o.name){case"union":return Tt(o);case"signature":return gt(o);default:return wt(o)}}n(On,"ie");l(On,"createType");function In({defaultValue:o}){if(o!=null){let{value:s}=o;if(!re(s))return E(s)}return null}n(In,"ae");l(In,"createDefaultValue");function vn({tsType:o,required:s}){if(o==null)return null;let i=o.name;return s||(i=i.replace(" | undefined","")),E(["Array","Record","signature"].includes(o.name)?o.raw:i)}n(vn,"ce");l(vn,"createType");function Nt(o){return o!=null?E(o.name):null}n(Nt,"nt");l(Nt,"createType");function Et(o){let{computed:s,func:i}=o;return typeof s>"u"&&typeof i>"u"}n(Et,"st");l(Et,"isReactDocgenTypescript");function Pt(o){return o?o.name==="string"?!0:o.name==="enum"?Array.isArray(o.value)&&o.value.every(({value:s})=>typeof s=="string"&&s[0]==='"'&&s[s.length-1]==='"'):!1:!1}n(Pt,"it");l(Pt,"isStringValued");function bt(o,s){if(o!=null){let{value:i}=o;if(!re(i))return Et(o)&&Pt(s)?E(JSON.stringify(i)):E(i)}return null}n(bt,"pt");l(bt,"createDefaultValue");function An(o,s,i){let{description:p,required:u,defaultValue:y}=i;return{name:o,type:Nt(s),required:u,description:p,defaultValue:bt(y,s)}}n(An,"ue");l(An,"createBasicPropDef");function Rn(o,s){var i;if(s!=null&&s.includesJsDoc){let{description:p,extractedTags:u}=s;p!=null&&(o.description=s.description);let y={...u,params:(i=u==null?void 0:u.params)==null?void 0:i.map(m=>({name:m.getPrettyName(),description:m.description}))};Object.values(y).filter(Boolean).length>0&&(o.jsDocTags=y)}return o}n(Rn,"w");l(Rn,"applyJsDocResult");function _n(o,s,i,p){let u=kn(s.description);return u.includesJsDoc&&u.ignore?null:{propDef:p(o,s,u),jsDocTags:u.extractedTags,docgenInfo:s,typeSystem:i}}n(_n,"fe");l(_n,"extractProp");function Ln(o){return o!=null?qe(o):""}n(Ln,"nn");l(Ln,"extractComponentDescription");const{combineParameters:Fn}=__STORYBOOK_MODULE_PREVIEW_API__;var $n=l(o=>{let{component:s,argTypes:i,parameters:{docs:p={}}}=o,{extractArgTypes:u}=p,y=u&&s?u(s):{};return y?Fn(y,i):i},"enhanceArgTypes"),jn="storybook/docs",Dn=`${jn}/snippet-rendered`,Un=(o=>(o.AUTO="auto",o.CODE="code",o.DYNAMIC="dynamic",o))(Un||{});export{$n as c,Un as g,Dn as y};
