var un=Object.defineProperty;var n=(o,s)=>un(o,"name",{value:s,configurable:!0});var C={exports:{}},yn=C.exports,qe;function dn(){return qe||(qe=1,function(o,s){(function(i,p){p(s)})(yn,function(i){function p(e){return e.text!==void 0&&e.text!==""?`'${e.type}' with value '${e.text}'`:`'${e.type}'`}n(p,"tokenToString");const ee=class ee extends Error{constructor(t){super(`No parslet found for token: ${p(t)}`),this.token=t,Object.setPrototypeOf(this,ee.prototype)}getToken(){return this.token}};n(ee,"NoParsletFoundError");let y=ee;const te=class te extends Error{constructor(t){super(`The parsing ended early. The next token was: ${p(t)}`),this.token=t,Object.setPrototypeOf(this,te.prototype)}getToken(){return this.token}};n(te,"EarlyEndOfParseError");let u=te;const ne=class ne extends Error{constructor(t,r){let a=`Unexpected type: '${t.type}'.`;r!==void 0&&(a+=` Message: ${r}`),super(a),Object.setPrototypeOf(this,ne.prototype)}};n(ne,"UnexpectedTypeError");let m=ne;function h(e){return t=>t.startsWith(e)?{type:e,text:e}:null}n(h,"makePunctuationRule");function J(e){let t=0,r;const a=e[0];let c=!1;if(a!=="'"&&a!=='"')return null;for(;t<e.length;){if(t++,r=e[t],!c&&r===a){t++;break}c=!c&&r==="\\"}if(r!==a)throw new Error("Unterminated String");return e.slice(0,t)}n(J,"getQuoted");const O=new RegExp("[$_\\p{ID_Start}]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u"),P=new RegExp("[$\\-\\p{ID_Continue}\\u200C\\u200D]|\\\\u\\p{Hex_Digit}{4}|\\\\u\\{0*(?:\\p{Hex_Digit}{1,5}|10\\p{Hex_Digit}{4})\\}","u");function se(e){let t=e[0];if(!O.test(t))return null;let r=1;do{if(t=e[r],!P.test(t))break;r++}while(r<e.length);return e.slice(0,r)}n(se,"getIdentifier");const $=/^(NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity))/;function Y(e){var t,r;return(r=(t=$.exec(e))===null||t===void 0?void 0:t[0])!==null&&r!==void 0?r:null}n(Y,"getNumber");const G=n(e=>{const t=se(e);return t==null?null:{type:"Identifier",text:t}},"identifierRule");function b(e){return t=>{if(!t.startsWith(e))return null;const r=t[e.length];return r!==void 0&&P.test(r)?null:{type:e,text:e}}}n(b,"makeKeyWordRule");const ae=n(e=>{const t=J(e);return t==null?null:{type:"StringValue",text:t}},"stringValueRule"),xt=n(e=>e.length>0?null:{type:"EOF",text:""},"eofRule"),St=n(e=>{const t=Y(e);return t===null?null:{type:"Number",text:t}},"numberRule"),Ot=[xt,h("=>"),h("("),h(")"),h("{"),h("}"),h("["),h("]"),h("|"),h("&"),h("<"),h(">"),h(","),h(";"),h("*"),h("?"),h("!"),h("="),h(":"),h("..."),h("."),h("#"),h("~"),h("/"),h("@"),b("undefined"),b("null"),b("function"),b("this"),b("new"),b("module"),b("event"),b("external"),b("typeof"),b("keyof"),b("readonly"),b("import"),b("is"),b("in"),b("asserts"),St,G,ae],It=/^\s*\n\s*/,D=class D{static create(t){const r=this.read(t);t=r.text;const a=this.read(t);return t=a.text,new D(t,void 0,r.token,a.token)}constructor(t,r,a,c){this.text="",this.text=t,this.previous=r,this.current=a,this.next=c}static read(t,r=!1){r=r||It.test(t),t=t.trim();for(const a of Ot){const c=a(t);if(c!==null){const d=Object.assign(Object.assign({},c),{startOfLine:r});return t=t.slice(d.text.length),{text:t,token:d}}}throw new Error("Unexpected Token "+t)}advance(){const t=D.read(this.text);return new D(t.text,this.current,this.next,t.token)}};n(D,"Lexer");let ie=D;function N(e){if(e===void 0)throw new Error("Unexpected undefined");if(e.type==="JsdocTypeKeyValue"||e.type==="JsdocTypeParameterList"||e.type==="JsdocTypeProperty"||e.type==="JsdocTypeReadonlyProperty"||e.type==="JsdocTypeObjectField"||e.type==="JsdocTypeJsdocObjectField"||e.type==="JsdocTypeIndexSignature"||e.type==="JsdocTypeMappedType")throw new m(e);return e}n(N,"assertRootResult");function ce(e){return e.type==="JsdocTypeKeyValue"?W(e):N(e)}n(ce,"assertPlainKeyValueOrRootResult");function vt(e){return e.type==="JsdocTypeName"?e:W(e)}n(vt,"assertPlainKeyValueOrNameResult");function W(e){if(e.type!=="JsdocTypeKeyValue")throw new m(e);return e}n(W,"assertPlainKeyValueResult");function At(e){var t;if(e.type==="JsdocTypeVariadic"){if(((t=e.element)===null||t===void 0?void 0:t.type)==="JsdocTypeName")return e;throw new m(e)}if(e.type!=="JsdocTypeNumber"&&e.type!=="JsdocTypeName")throw new m(e);return e}n(At,"assertNumberOrVariadicNameResult");function le(e){return e.type==="JsdocTypeIndexSignature"||e.type==="JsdocTypeMappedType"}n(le,"isSquaredProperty");var f;(function(e){e[e.ALL=0]="ALL",e[e.PARAMETER_LIST=1]="PARAMETER_LIST",e[e.OBJECT=2]="OBJECT",e[e.KEY_VALUE=3]="KEY_VALUE",e[e.INDEX_BRACKETS=4]="INDEX_BRACKETS",e[e.UNION=5]="UNION",e[e.INTERSECTION=6]="INTERSECTION",e[e.PREFIX=7]="PREFIX",e[e.INFIX=8]="INFIX",e[e.TUPLE=9]="TUPLE",e[e.SYMBOL=10]="SYMBOL",e[e.OPTIONAL=11]="OPTIONAL",e[e.NULLABLE=12]="NULLABLE",e[e.KEY_OF_TYPE_OF=13]="KEY_OF_TYPE_OF",e[e.FUNCTION=14]="FUNCTION",e[e.ARROW=15]="ARROW",e[e.ARRAY_BRACKETS=16]="ARRAY_BRACKETS",e[e.GENERIC=17]="GENERIC",e[e.NAME_PATH=18]="NAME_PATH",e[e.PARENTHESIS=19]="PARENTHESIS",e[e.SPECIAL_TYPES=20]="SPECIAL_TYPES"})(f||(f={}));const we=class we{constructor(t,r,a){this.grammar=t,typeof r=="string"?this._lexer=ie.create(r):this._lexer=r,this.baseParser=a}get lexer(){return this._lexer}parse(){const t=this.parseType(f.ALL);if(this.lexer.current.type!=="EOF")throw new u(this.lexer.current);return t}parseType(t){return N(this.parseIntermediateType(t))}parseIntermediateType(t){const r=this.tryParslets(null,t);if(r===null)throw new y(this.lexer.current);return this.parseInfixIntermediateType(r,t)}parseInfixIntermediateType(t,r){let a=this.tryParslets(t,r);for(;a!==null;)t=a,a=this.tryParslets(t,r);return t}tryParslets(t,r){for(const a of this.grammar){const c=a(this,r,t);if(c!==null)return c}return null}consume(t){return Array.isArray(t)||(t=[t]),t.includes(this.lexer.current.type)?(this._lexer=this.lexer.advance(),!0):!1}acceptLexerState(t){this._lexer=t.lexer}};n(we,"Parser");let A=we;function ve(e){return e==="EOF"||e==="|"||e===","||e===")"||e===">"}n(ve,"isQuestionMarkUnknownType");const pe=n((e,t,r)=>{const a=e.lexer.current.type,c=e.lexer.next.type;return r==null&&a==="?"&&!ve(c)||r!=null&&a==="?"?(e.consume("?"),r==null?{type:"JsdocTypeNullable",element:e.parseType(f.NULLABLE),meta:{position:"prefix"}}:{type:"JsdocTypeNullable",element:N(r),meta:{position:"suffix"}}):null},"nullableParslet");function g(e){const t=n((r,a,c)=>{const d=r.lexer.current.type,T=r.lexer.next.type;if(c===null){if("parsePrefix"in e&&e.accept(d,T))return e.parsePrefix(r)}else if("parseInfix"in e&&e.precedence>a&&e.accept(d,T))return e.parseInfix(r,c);return null},"parslet");return Object.defineProperty(t,"name",{value:e.name}),t}n(g,"composeParslet");const X=g({name:"optionalParslet",accept:n(e=>e==="=","accept"),precedence:f.OPTIONAL,parsePrefix:n(e=>(e.consume("="),{type:"JsdocTypeOptional",element:e.parseType(f.OPTIONAL),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:n((e,t)=>(e.consume("="),{type:"JsdocTypeOptional",element:N(t),meta:{position:"suffix"}}),"parseInfix")}),Q=g({name:"numberParslet",accept:n(e=>e==="Number","accept"),parsePrefix:n(e=>{const t=parseFloat(e.lexer.current.text);return e.consume("Number"),{type:"JsdocTypeNumber",value:t}},"parsePrefix")}),Rt=g({name:"parenthesisParslet",accept:n(e=>e==="(","accept"),parsePrefix:n(e=>{if(e.consume("("),e.consume(")"))return{type:"JsdocTypeParameterList",elements:[]};const t=e.parseIntermediateType(f.ALL);if(!e.consume(")"))throw new Error("Unterminated parenthesis");return t.type==="JsdocTypeParameterList"?t:t.type==="JsdocTypeKeyValue"?{type:"JsdocTypeParameterList",elements:[t]}:{type:"JsdocTypeParenthesis",element:N(t)}},"parsePrefix")}),_t=g({name:"specialTypesParslet",accept:n((e,t)=>e==="?"&&ve(t)||e==="null"||e==="undefined"||e==="*","accept"),parsePrefix:n(e=>{if(e.consume("null"))return{type:"JsdocTypeNull"};if(e.consume("undefined"))return{type:"JsdocTypeUndefined"};if(e.consume("*"))return{type:"JsdocTypeAny"};if(e.consume("?"))return{type:"JsdocTypeUnknown"};throw new Error("Unacceptable token: "+e.lexer.current.text)},"parsePrefix")}),Lt=g({name:"notNullableParslet",accept:n(e=>e==="!","accept"),precedence:f.NULLABLE,parsePrefix:n(e=>(e.consume("!"),{type:"JsdocTypeNotNullable",element:e.parseType(f.NULLABLE),meta:{position:"prefix"}}),"parsePrefix"),parseInfix:n((e,t)=>(e.consume("!"),{type:"JsdocTypeNotNullable",element:N(t),meta:{position:"suffix"}}),"parseInfix")});function Ft({allowTrailingComma:e}){return g({name:"parameterListParslet",accept:n(t=>t===",","accept"),precedence:f.PARAMETER_LIST,parseInfix:n((t,r)=>{const a=[ce(r)];t.consume(",");do try{const c=t.parseIntermediateType(f.PARAMETER_LIST);a.push(ce(c))}catch(c){if(c instanceof y)break;throw c}while(t.consume(","));if(a.length>0&&a.slice(0,-1).some(c=>c.type==="JsdocTypeVariadic"))throw new Error("Only the last parameter may be a rest parameter");return{type:"JsdocTypeParameterList",elements:a}},"parseInfix")})}n(Ft,"createParameterListParslet");const Ut=g({name:"genericParslet",accept:n((e,t)=>e==="<"||e==="."&&t==="<","accept"),precedence:f.GENERIC,parseInfix:n((e,t)=>{const r=e.consume(".");e.consume("<");const a=[];do a.push(e.parseType(f.PARAMETER_LIST));while(e.consume(","));if(!e.consume(">"))throw new Error("Unterminated generic parameter list");return{type:"JsdocTypeGeneric",left:N(t),elements:a,meta:{brackets:"angle",dot:r}}},"parseInfix")}),jt=g({name:"unionParslet",accept:n(e=>e==="|","accept"),precedence:f.UNION,parseInfix:n((e,t)=>{e.consume("|");const r=[];do r.push(e.parseType(f.UNION));while(e.consume("|"));return{type:"JsdocTypeUnion",elements:[N(t),...r]}},"parseInfix")}),ue=[pe,X,Q,Rt,_t,Lt,Ft({allowTrailingComma:!0}),Ut,jt,X];function H({allowSquareBracketsOnAnyType:e,allowJsdocNamePaths:t,pathGrammar:r}){return n(function(c,d,T){if(T==null||d>=f.NAME_PATH)return null;const w=c.lexer.current.type,S=c.lexer.next.type;if(!(w==="."&&S!=="<"||w==="["&&(e||T.type==="JsdocTypeName")||t&&(w==="~"||w==="#")))return null;let I,re=!1;c.consume(".")?I="property":c.consume("[")?(I="property-brackets",re=!0):c.consume("~")?I="inner":(c.consume("#"),I="instance");const De=r!==null?new A(r,c.lexer,c):c,v=De.parseIntermediateType(f.NAME_PATH);c.acceptLexerState(De);let B;switch(v.type){case"JsdocTypeName":B={type:"JsdocTypeProperty",value:v.value,meta:{quote:void 0}};break;case"JsdocTypeNumber":B={type:"JsdocTypeProperty",value:v.value.toString(10),meta:{quote:void 0}};break;case"JsdocTypeStringValue":B={type:"JsdocTypeProperty",value:v.value,meta:{quote:v.meta.quote}};break;case"JsdocTypeSpecialNamePath":if(v.specialType==="event")B=v;else throw new m(v,"Type 'JsdocTypeSpecialNamePath' is only allowed with specialType 'event'");break;default:throw new m(v,"Expecting 'JsdocTypeName', 'JsdocTypeNumber', 'JsdocStringValue' or 'JsdocTypeSpecialNamePath'")}if(re&&!c.consume("]")){const $e=c.lexer.current;throw new Error(`Unterminated square brackets. Next token is '${$e.type}' with text '${$e.text}'`)}return{type:"JsdocTypeNamePath",left:N(T),right:B,pathType:I}},"namePathParslet")}n(H,"createNamePathParslet");function R({allowedAdditionalTokens:e}){return g({name:"nameParslet",accept:n(t=>t==="Identifier"||t==="this"||t==="new"||e.includes(t),"accept"),parsePrefix:n(t=>{const{type:r,text:a}=t.lexer.current;return t.consume(r),{type:"JsdocTypeName",value:a}},"parsePrefix")})}n(R,"createNameParslet");const q=g({name:"stringValueParslet",accept:n(e=>e==="StringValue","accept"),parsePrefix:n(e=>{const t=e.lexer.current.text;return e.consume("StringValue"),{type:"JsdocTypeStringValue",value:t.slice(1,-1),meta:{quote:t[0]==="'"?"single":"double"}}},"parsePrefix")});function z({pathGrammar:e,allowedTypes:t}){return g({name:"specialNamePathParslet",accept:n(r=>t.includes(r),"accept"),parsePrefix:n(r=>{const a=r.lexer.current.type;if(r.consume(a),!r.consume(":"))return{type:"JsdocTypeName",value:a};let c,d=r.lexer.current;if(r.consume("StringValue"))c={type:"JsdocTypeSpecialNamePath",value:d.text.slice(1,-1),specialType:a,meta:{quote:d.text[0]==="'"?"single":"double"}};else{let S="";const k=["Identifier","@","/"];for(;k.some(I=>r.consume(I));)S+=d.text,d=r.lexer.current;c={type:"JsdocTypeSpecialNamePath",value:S,specialType:a,meta:{quote:void 0}}}const T=new A(e,r.lexer,r),w=T.parseInfixIntermediateType(c,f.ALL);return r.acceptLexerState(T),N(w)},"parsePrefix")})}n(z,"createSpecialNamePathParslet");const Ae=[R({allowedAdditionalTokens:["external","module"]}),q,Q,H({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:null})],K=[...Ae,z({allowedTypes:["event"],pathGrammar:Ae})];function ye(e){let t;if(e.type==="JsdocTypeParameterList")t=e.elements;else if(e.type==="JsdocTypeParenthesis")t=[e.element];else throw new m(e);return t.map(r=>ce(r))}n(ye,"getParameters");function Vt(e){const t=ye(e);if(t.some(r=>r.type==="JsdocTypeKeyValue"))throw new Error("No parameter should be named");return t}n(Vt,"getUnnamedParameters");function de({allowNamedParameters:e,allowNoReturnType:t,allowWithoutParenthesis:r,allowNewAsFunctionKeyword:a}){return g({name:"functionParslet",accept:n((c,d)=>c==="function"||a&&c==="new"&&d==="(","accept"),parsePrefix:n(c=>{const d=c.consume("new");c.consume("function");const T=c.lexer.current.type==="(";if(!T){if(!r)throw new Error("function is missing parameter list");return{type:"JsdocTypeName",value:"function"}}let w={type:"JsdocTypeFunction",parameters:[],arrow:!1,constructor:d,parenthesis:T};const S=c.parseIntermediateType(f.FUNCTION);if(e===void 0)w.parameters=Vt(S);else{if(d&&S.type==="JsdocTypeFunction"&&S.arrow)return w=S,w.constructor=!0,w;w.parameters=ye(S);for(const k of w.parameters)if(k.type==="JsdocTypeKeyValue"&&!e.includes(k.key))throw new Error(`only allowed named parameters are ${e.join(", ")} but got ${k.type}`)}if(c.consume(":"))w.returnType=c.parseType(f.PREFIX);else if(!t)throw new Error("function is missing return type");return w},"parsePrefix")})}n(de,"createFunctionParslet");function me({allowPostfix:e,allowEnclosingBrackets:t}){return g({name:"variadicParslet",accept:n(r=>r==="...","accept"),precedence:f.PREFIX,parsePrefix:n(r=>{r.consume("...");const a=t&&r.consume("[");try{const c=r.parseType(f.PREFIX);if(a&&!r.consume("]"))throw new Error("Unterminated variadic type. Missing ']'");return{type:"JsdocTypeVariadic",element:N(c),meta:{position:"prefix",squareBrackets:a}}}catch(c){if(c instanceof y){if(a)throw new Error("Empty square brackets for variadic are not allowed.");return{type:"JsdocTypeVariadic",meta:{position:void 0,squareBrackets:!1}}}else throw c}},"parsePrefix"),parseInfix:e?(r,a)=>(r.consume("..."),{type:"JsdocTypeVariadic",element:N(a),meta:{position:"suffix",squareBrackets:!1}}):void 0})}n(me,"createVariadicParslet");const Re=g({name:"symbolParslet",accept:n(e=>e==="(","accept"),precedence:f.SYMBOL,parseInfix:n((e,t)=>{if(t.type!=="JsdocTypeName")throw new Error("Symbol expects a name on the left side. (Reacting on '(')");e.consume("(");const r={type:"JsdocTypeSymbol",value:t.value};if(!e.consume(")")){const a=e.parseIntermediateType(f.SYMBOL);if(r.element=At(a),!e.consume(")"))throw new Error("Symbol does not end after value")}return r},"parseInfix")}),_e=g({name:"arrayBracketsParslet",precedence:f.ARRAY_BRACKETS,accept:n((e,t)=>e==="["&&t==="]","accept"),parseInfix:n((e,t)=>(e.consume("["),e.consume("]"),{type:"JsdocTypeGeneric",left:{type:"JsdocTypeName",value:"Array"},elements:[N(t)],meta:{brackets:"square",dot:!1}}),"parseInfix")});function fe({objectFieldGrammar:e,allowKeyTypes:t}){return g({name:"objectParslet",accept:n(r=>r==="{","accept"),parsePrefix:n(r=>{r.consume("{");const a={type:"JsdocTypeObject",meta:{separator:"comma"},elements:[]};if(!r.consume("}")){let c;const d=new A(e,r.lexer,r);for(;;){d.acceptLexerState(r);let T=d.parseIntermediateType(f.OBJECT);r.acceptLexerState(d),T===void 0&&t&&(T=r.parseIntermediateType(f.OBJECT));let w=!1;if(T.type==="JsdocTypeNullable"&&(w=!0,T=T.element),T.type==="JsdocTypeNumber"||T.type==="JsdocTypeName"||T.type==="JsdocTypeStringValue"){let k;T.type==="JsdocTypeStringValue"&&(k=T.meta.quote),a.elements.push({type:"JsdocTypeObjectField",key:T.value.toString(),right:void 0,optional:w,readonly:!1,meta:{quote:k}})}else if(T.type==="JsdocTypeObjectField"||T.type==="JsdocTypeJsdocObjectField")a.elements.push(T);else throw new m(T);if(r.lexer.current.startOfLine)c="linebreak";else if(r.consume(","))c="comma";else if(r.consume(";"))c="semicolon";else break;if(r.lexer.current.type==="}")break}if(a.meta.separator=c??"comma",!r.consume("}"))throw new Error("Unterminated record type. Missing '}'")}return a},"parsePrefix")})}n(fe,"createObjectParslet");function Te({allowSquaredProperties:e,allowKeyTypes:t,allowReadonly:r,allowOptional:a}){return g({name:"objectFieldParslet",precedence:f.KEY_VALUE,accept:n(c=>c===":","accept"),parseInfix:n((c,d)=>{var T;let w=!1,S=!1;a&&d.type==="JsdocTypeNullable"&&(w=!0,d=d.element),r&&d.type==="JsdocTypeReadonlyProperty"&&(S=!0,d=d.element);const k=(T=c.baseParser)!==null&&T!==void 0?T:c;if(k.acceptLexerState(c),d.type==="JsdocTypeNumber"||d.type==="JsdocTypeName"||d.type==="JsdocTypeStringValue"||le(d)){if(le(d)&&!e)throw new m(d);k.consume(":");let I;d.type==="JsdocTypeStringValue"&&(I=d.meta.quote);const re=k.parseType(f.KEY_VALUE);return c.acceptLexerState(k),{type:"JsdocTypeObjectField",key:le(d)?d:d.value.toString(),right:re,optional:w,readonly:S,meta:{quote:I}}}else{if(!t)throw new m(d);k.consume(":");const I=k.parseType(f.KEY_VALUE);return c.acceptLexerState(k),{type:"JsdocTypeJsdocObjectField",left:N(d),right:I}}},"parseInfix")})}n(Te,"createObjectFieldParslet");function he({allowOptional:e,allowVariadic:t}){return g({name:"keyValueParslet",precedence:f.KEY_VALUE,accept:n(r=>r===":","accept"),parseInfix:n((r,a)=>{let c=!1,d=!1;if(e&&a.type==="JsdocTypeNullable"&&(c=!0,a=a.element),t&&a.type==="JsdocTypeVariadic"&&a.element!==void 0&&(d=!0,a=a.element),a.type!=="JsdocTypeName")throw new m(a);r.consume(":");const T=r.parseType(f.KEY_VALUE);return{type:"JsdocTypeKeyValue",key:a.value,right:T,optional:c,variadic:d}},"parseInfix")})}n(he,"createKeyValueParslet");const Le=[...ue,de({allowWithoutParenthesis:!0,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),q,z({allowedTypes:["module","external","event"],pathGrammar:K}),me({allowEnclosingBrackets:!0,allowPostfix:!0}),R({allowedAdditionalTokens:["keyof"]}),Re,_e,H({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:K})],Kt=[...Le,fe({objectFieldGrammar:[R({allowedAdditionalTokens:["module","in"]}),Te({allowSquaredProperties:!1,allowKeyTypes:!0,allowOptional:!1,allowReadonly:!1}),...Le],allowKeyTypes:!0}),he({allowOptional:!0,allowVariadic:!0})],Fe=g({name:"typeOfParslet",accept:n(e=>e==="typeof","accept"),parsePrefix:n(e=>(e.consume("typeof"),{type:"JsdocTypeTypeof",element:N(e.parseType(f.KEY_OF_TYPE_OF))}),"parsePrefix")}),Dt=[R({allowedAdditionalTokens:["module","keyof","event","external","in"]}),pe,X,q,Q,Te({allowSquaredProperties:!1,allowKeyTypes:!1,allowOptional:!1,allowReadonly:!1})],$t=[...ue,fe({allowKeyTypes:!1,objectFieldGrammar:Dt}),R({allowedAdditionalTokens:["event","external","in"]}),Fe,de({allowWithoutParenthesis:!1,allowNamedParameters:["this","new"],allowNoReturnType:!0,allowNewAsFunctionKeyword:!1}),me({allowEnclosingBrackets:!1,allowPostfix:!1}),R({allowedAdditionalTokens:["keyof"]}),z({allowedTypes:["module"],pathGrammar:K}),H({allowSquareBracketsOnAnyType:!1,allowJsdocNamePaths:!0,pathGrammar:K}),he({allowOptional:!1,allowVariadic:!1}),Re],qt=g({name:"assertsParslet",accept:n(e=>e==="asserts","accept"),parsePrefix:n(e=>{e.consume("asserts");const t=e.parseIntermediateType(f.SYMBOL);if(t.type!=="JsdocTypeName")throw new m(t,"A typescript asserts always has to have a name on the left side.");return e.consume("is"),{type:"JsdocTypeAsserts",left:t,right:N(e.parseIntermediateType(f.INFIX))}},"parsePrefix")});function Mt({allowQuestionMark:e}){return g({name:"tupleParslet",accept:n(t=>t==="[","accept"),parsePrefix:n(t=>{t.consume("[");const r={type:"JsdocTypeTuple",elements:[]};if(t.consume("]"))return r;const a=t.parseIntermediateType(f.ALL);if(a.type==="JsdocTypeParameterList"?a.elements[0].type==="JsdocTypeKeyValue"?r.elements=a.elements.map(W):r.elements=a.elements.map(N):a.type==="JsdocTypeKeyValue"?r.elements=[W(a)]:r.elements=[N(a)],!t.consume("]"))throw new Error("Unterminated '['");if(r.elements.some(c=>c.type==="JsdocTypeUnknown"))throw new Error("Question mark in tuple not allowed");return r},"parsePrefix")})}n(Mt,"createTupleParslet");const Bt=g({name:"keyOfParslet",accept:n(e=>e==="keyof","accept"),parsePrefix:n(e=>(e.consume("keyof"),{type:"JsdocTypeKeyof",element:N(e.parseType(f.KEY_OF_TYPE_OF))}),"parsePrefix")}),Ct=g({name:"importParslet",accept:n(e=>e==="import","accept"),parsePrefix:n(e=>{if(e.consume("import"),!e.consume("("))throw new Error("Missing parenthesis after import keyword");const t=e.parseType(f.PREFIX);if(t.type!=="JsdocTypeStringValue")throw new Error("Only string values are allowed as paths for imports");if(!e.consume(")"))throw new Error("Missing closing parenthesis after import keyword");return{type:"JsdocTypeImport",element:t}},"parsePrefix")}),Yt=g({name:"readonlyPropertyParslet",accept:n(e=>e==="readonly","accept"),parsePrefix:n(e=>(e.consume("readonly"),{type:"JsdocTypeReadonlyProperty",element:e.parseType(f.KEY_VALUE)}),"parsePrefix")}),Gt=g({name:"arrowFunctionParslet",precedence:f.ARROW,accept:n(e=>e==="=>","accept"),parseInfix:n((e,t)=>(e.consume("=>"),{type:"JsdocTypeFunction",parameters:ye(t).map(vt),arrow:!0,constructor:!1,parenthesis:!0,returnType:e.parseType(f.OBJECT)}),"parseInfix")}),Wt=g({name:"intersectionParslet",accept:n(e=>e==="&","accept"),precedence:f.INTERSECTION,parseInfix:n((e,t)=>{e.consume("&");const r=[];do r.push(e.parseType(f.INTERSECTION));while(e.consume("&"));return{type:"JsdocTypeIntersection",elements:[N(t),...r]}},"parseInfix")}),Xt=g({name:"predicateParslet",precedence:f.INFIX,accept:n(e=>e==="is","accept"),parseInfix:n((e,t)=>{if(t.type!=="JsdocTypeName")throw new m(t,"A typescript predicate always has to have a name on the left side.");return e.consume("is"),{type:"JsdocTypePredicate",left:t,right:N(e.parseIntermediateType(f.INFIX))}},"parseInfix")}),Qt=g({name:"objectSquareBracketPropertyParslet",accept:n(e=>e==="[","accept"),parsePrefix:n(e=>{if(e.baseParser===void 0)throw new Error("Only allowed inside object grammar");e.consume("[");const t=e.lexer.current.text;e.consume("Identifier");let r;if(e.consume(":")){const a=e.baseParser;a.acceptLexerState(e),r={type:"JsdocTypeIndexSignature",key:t,right:a.parseType(f.INDEX_BRACKETS)},e.acceptLexerState(a)}else if(e.consume("in")){const a=e.baseParser;a.acceptLexerState(e),r={type:"JsdocTypeMappedType",key:t,right:a.parseType(f.ARRAY_BRACKETS)},e.acceptLexerState(a)}else throw new Error("Missing ':' or 'in' inside square bracketed property.");if(!e.consume("]"))throw new Error("Unterminated square brackets");return r},"parsePrefix")}),Ht=[Yt,R({allowedAdditionalTokens:["module","event","keyof","event","external","in"]}),pe,X,q,Q,Te({allowSquaredProperties:!0,allowKeyTypes:!1,allowOptional:!0,allowReadonly:!0}),Qt],zt=[...ue,fe({allowKeyTypes:!1,objectFieldGrammar:Ht}),Fe,Bt,Ct,q,de({allowWithoutParenthesis:!0,allowNoReturnType:!1,allowNamedParameters:["this","new","args"],allowNewAsFunctionKeyword:!0}),Mt({allowQuestionMark:!1}),me({allowEnclosingBrackets:!1,allowPostfix:!1}),qt,R({allowedAdditionalTokens:["event","external","in"]}),z({allowedTypes:["module"],pathGrammar:K}),_e,Gt,H({allowSquareBracketsOnAnyType:!0,allowJsdocNamePaths:!1,pathGrammar:K}),Wt,Xt,he({allowVariadic:!0,allowOptional:!0})];function Ue(e,t){switch(t){case"closure":return new A($t,e).parse();case"jsdoc":return new A(Kt,e).parse();case"typescript":return new A(zt,e).parse()}}n(Ue,"parse");function Zt(e,t=["typescript","closure","jsdoc"]){let r;for(const a of t)try{return Ue(e,a)}catch(c){r=c}throw r}n(Zt,"tryParse");function M(e,t){const r=e[t.type];if(r===void 0)throw new Error(`In this set of transform rules exists no rule for type ${t.type}.`);return r(t,a=>M(e,a))}n(M,"transform");function x(e){throw new Error("This transform is not available. Are you trying the correct parsing mode?")}n(x,"notAvailableTransform");function je(e){const t={params:[]};for(const r of e.parameters)r.type==="JsdocTypeKeyValue"?r.key==="this"?t.this=r.right:r.key==="new"?t.new=r.right:t.params.push(r):t.params.push(r);return t}n(je,"extractSpecialParams");function Z(e,t,r){return e==="prefix"?r+t:t+r}n(Z,"applyPosition");function _(e,t){switch(t){case"double":return`"${e}"`;case"single":return`'${e}'`;case void 0:return e}}n(_,"quote");function Ve(){return{JsdocTypeParenthesis:n((e,t)=>`(${e.element!==void 0?t(e.element):""})`,"JsdocTypeParenthesis"),JsdocTypeKeyof:n((e,t)=>`keyof ${t(e.element)}`,"JsdocTypeKeyof"),JsdocTypeFunction:n((e,t)=>{if(e.arrow){if(e.returnType===void 0)throw new Error("Arrow function needs a return type.");let r=`(${e.parameters.map(t).join(", ")}) => ${t(e.returnType)}`;return e.constructor&&(r="new "+r),r}else{let r=e.constructor?"new":"function";return e.parenthesis&&(r+=`(${e.parameters.map(t).join(", ")})`,e.returnType!==void 0&&(r+=`: ${t(e.returnType)}`)),r}},"JsdocTypeFunction"),JsdocTypeName:n(e=>e.value,"JsdocTypeName"),JsdocTypeTuple:n((e,t)=>`[${e.elements.map(t).join(", ")}]`,"JsdocTypeTuple"),JsdocTypeVariadic:n((e,t)=>e.meta.position===void 0?"...":Z(e.meta.position,t(e.element),"..."),"JsdocTypeVariadic"),JsdocTypeNamePath:n((e,t)=>{const r=t(e.left),a=t(e.right);switch(e.pathType){case"inner":return`${r}~${a}`;case"instance":return`${r}#${a}`;case"property":return`${r}.${a}`;case"property-brackets":return`${r}[${a}]`}},"JsdocTypeNamePath"),JsdocTypeStringValue:n(e=>_(e.value,e.meta.quote),"JsdocTypeStringValue"),JsdocTypeAny:n(()=>"*","JsdocTypeAny"),JsdocTypeGeneric:n((e,t)=>{if(e.meta.brackets==="square"){const r=e.elements[0],a=t(r);return r.type==="JsdocTypeUnion"||r.type==="JsdocTypeIntersection"?`(${a})[]`:`${a}[]`}else return`${t(e.left)}${e.meta.dot?".":""}<${e.elements.map(t).join(", ")}>`},"JsdocTypeGeneric"),JsdocTypeImport:n((e,t)=>`import(${t(e.element)})`,"JsdocTypeImport"),JsdocTypeObjectField:n((e,t)=>{let r="";return e.readonly&&(r+="readonly "),typeof e.key=="string"?r+=_(e.key,e.meta.quote):r+=t(e.key),e.optional&&(r+="?"),e.right===void 0?r:r+`: ${t(e.right)}`},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:n((e,t)=>`${t(e.left)}: ${t(e.right)}`,"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:n((e,t)=>{let r=e.key;return e.optional&&(r+="?"),e.variadic&&(r="..."+r),e.right===void 0?r:r+`: ${t(e.right)}`},"JsdocTypeKeyValue"),JsdocTypeSpecialNamePath:n(e=>`${e.specialType}:${_(e.value,e.meta.quote)}`,"JsdocTypeSpecialNamePath"),JsdocTypeNotNullable:n((e,t)=>Z(e.meta.position,t(e.element),"!"),"JsdocTypeNotNullable"),JsdocTypeNull:n(()=>"null","JsdocTypeNull"),JsdocTypeNullable:n((e,t)=>Z(e.meta.position,t(e.element),"?"),"JsdocTypeNullable"),JsdocTypeNumber:n(e=>e.value.toString(),"JsdocTypeNumber"),JsdocTypeObject:n((e,t)=>`{${e.elements.map(t).join((e.meta.separator==="comma"?",":";")+" ")}}`,"JsdocTypeObject"),JsdocTypeOptional:n((e,t)=>Z(e.meta.position,t(e.element),"="),"JsdocTypeOptional"),JsdocTypeSymbol:n((e,t)=>`${e.value}(${e.element!==void 0?t(e.element):""})`,"JsdocTypeSymbol"),JsdocTypeTypeof:n((e,t)=>`typeof ${t(e.element)}`,"JsdocTypeTypeof"),JsdocTypeUndefined:n(()=>"undefined","JsdocTypeUndefined"),JsdocTypeUnion:n((e,t)=>e.elements.map(t).join(" | "),"JsdocTypeUnion"),JsdocTypeUnknown:n(()=>"?","JsdocTypeUnknown"),JsdocTypeIntersection:n((e,t)=>e.elements.map(t).join(" & "),"JsdocTypeIntersection"),JsdocTypeProperty:n(e=>_(e.value,e.meta.quote),"JsdocTypeProperty"),JsdocTypePredicate:n((e,t)=>`${t(e.left)} is ${t(e.right)}`,"JsdocTypePredicate"),JsdocTypeIndexSignature:n((e,t)=>`[${e.key}: ${t(e.right)}]`,"JsdocTypeIndexSignature"),JsdocTypeMappedType:n((e,t)=>`[${e.key} in ${t(e.right)}]`,"JsdocTypeMappedType"),JsdocTypeAsserts:n((e,t)=>`asserts ${t(e.left)} is ${t(e.right)}`,"JsdocTypeAsserts")}}n(Ve,"stringifyRules");const en=Ve();function tn(e){return M(en,e)}n(tn,"stringify");const nn=["null","true","false","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","yield"];function L(e){const t={type:"NameExpression",name:e};return nn.includes(e)&&(t.reservedWord=!0),t}n(L,"makeName");const rn={JsdocTypeOptional:n((e,t)=>{const r=t(e.element);return r.optional=!0,r},"JsdocTypeOptional"),JsdocTypeNullable:n((e,t)=>{const r=t(e.element);return r.nullable=!0,r},"JsdocTypeNullable"),JsdocTypeNotNullable:n((e,t)=>{const r=t(e.element);return r.nullable=!1,r},"JsdocTypeNotNullable"),JsdocTypeVariadic:n((e,t)=>{if(e.element===void 0)throw new Error("dots without value are not allowed in catharsis mode");const r=t(e.element);return r.repeatable=!0,r},"JsdocTypeVariadic"),JsdocTypeAny:n(()=>({type:"AllLiteral"}),"JsdocTypeAny"),JsdocTypeNull:n(()=>({type:"NullLiteral"}),"JsdocTypeNull"),JsdocTypeStringValue:n(e=>L(_(e.value,e.meta.quote)),"JsdocTypeStringValue"),JsdocTypeUndefined:n(()=>({type:"UndefinedLiteral"}),"JsdocTypeUndefined"),JsdocTypeUnknown:n(()=>({type:"UnknownLiteral"}),"JsdocTypeUnknown"),JsdocTypeFunction:n((e,t)=>{const r=je(e),a={type:"FunctionType",params:r.params.map(t)};return r.this!==void 0&&(a.this=t(r.this)),r.new!==void 0&&(a.new=t(r.new)),e.returnType!==void 0&&(a.result=t(e.returnType)),a},"JsdocTypeFunction"),JsdocTypeGeneric:n((e,t)=>({type:"TypeApplication",applications:e.elements.map(r=>t(r)),expression:t(e.left)}),"JsdocTypeGeneric"),JsdocTypeSpecialNamePath:n(e=>L(e.specialType+":"+_(e.value,e.meta.quote)),"JsdocTypeSpecialNamePath"),JsdocTypeName:n(e=>e.value!=="function"?L(e.value):{type:"FunctionType",params:[]},"JsdocTypeName"),JsdocTypeNumber:n(e=>L(e.value.toString()),"JsdocTypeNumber"),JsdocTypeObject:n((e,t)=>{const r={type:"RecordType",fields:[]};for(const a of e.elements)a.type!=="JsdocTypeObjectField"&&a.type!=="JsdocTypeJsdocObjectField"?r.fields.push({type:"FieldType",key:t(a),value:void 0}):r.fields.push(t(a));return r},"JsdocTypeObject"),JsdocTypeObjectField:n((e,t)=>{if(typeof e.key!="string")throw new Error("Index signatures and mapped types are not supported");return{type:"FieldType",key:L(_(e.key,e.meta.quote)),value:e.right===void 0?void 0:t(e.right)}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:n((e,t)=>({type:"FieldType",key:t(e.left),value:t(e.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeUnion:n((e,t)=>({type:"TypeUnion",elements:e.elements.map(r=>t(r))}),"JsdocTypeUnion"),JsdocTypeKeyValue:n((e,t)=>({type:"FieldType",key:L(e.key),value:e.right===void 0?void 0:t(e.right)}),"JsdocTypeKeyValue"),JsdocTypeNamePath:n((e,t)=>{const r=t(e.left);let a;e.right.type==="JsdocTypeSpecialNamePath"?a=t(e.right).name:a=_(e.right.value,e.right.meta.quote);const c=e.pathType==="inner"?"~":e.pathType==="instance"?"#":".";return L(`${r.name}${c}${a}`)},"JsdocTypeNamePath"),JsdocTypeSymbol:n(e=>{let t="",r=e.element,a=!1;return r?.type==="JsdocTypeVariadic"&&(r.meta.position==="prefix"?t="...":a=!0,r=r.element),r?.type==="JsdocTypeName"?t+=r.value:r?.type==="JsdocTypeNumber"&&(t+=r.value.toString()),a&&(t+="..."),L(`${e.value}(${t})`)},"JsdocTypeSymbol"),JsdocTypeParenthesis:n((e,t)=>t(N(e.element)),"JsdocTypeParenthesis"),JsdocTypeMappedType:x,JsdocTypeIndexSignature:x,JsdocTypeImport:x,JsdocTypeKeyof:x,JsdocTypeTuple:x,JsdocTypeTypeof:x,JsdocTypeIntersection:x,JsdocTypeProperty:x,JsdocTypePredicate:x,JsdocTypeAsserts:x};function on(e){return M(rn,e)}n(on,"catharsisTransform");function j(e){switch(e){case void 0:return"none";case"single":return"single";case"double":return"double"}}n(j,"getQuoteStyle");function sn(e){switch(e){case"inner":return"INNER_MEMBER";case"instance":return"INSTANCE_MEMBER";case"property":return"MEMBER";case"property-brackets":return"MEMBER"}}n(sn,"getMemberType");function Je(e,t){return t.length===2?{type:e,left:t[0],right:t[1]}:{type:e,left:t[0],right:Je(e,t.slice(1))}}n(Je,"nestResults");const an={JsdocTypeOptional:n((e,t)=>({type:"OPTIONAL",value:t(e.element),meta:{syntax:e.meta.position==="prefix"?"PREFIX_EQUAL_SIGN":"SUFFIX_EQUALS_SIGN"}}),"JsdocTypeOptional"),JsdocTypeNullable:n((e,t)=>({type:"NULLABLE",value:t(e.element),meta:{syntax:e.meta.position==="prefix"?"PREFIX_QUESTION_MARK":"SUFFIX_QUESTION_MARK"}}),"JsdocTypeNullable"),JsdocTypeNotNullable:n((e,t)=>({type:"NOT_NULLABLE",value:t(e.element),meta:{syntax:e.meta.position==="prefix"?"PREFIX_BANG":"SUFFIX_BANG"}}),"JsdocTypeNotNullable"),JsdocTypeVariadic:n((e,t)=>{const r={type:"VARIADIC",meta:{syntax:e.meta.position==="prefix"?"PREFIX_DOTS":e.meta.position==="suffix"?"SUFFIX_DOTS":"ONLY_DOTS"}};return e.element!==void 0&&(r.value=t(e.element)),r},"JsdocTypeVariadic"),JsdocTypeName:n(e=>({type:"NAME",name:e.value}),"JsdocTypeName"),JsdocTypeTypeof:n((e,t)=>({type:"TYPE_QUERY",name:t(e.element)}),"JsdocTypeTypeof"),JsdocTypeTuple:n((e,t)=>({type:"TUPLE",entries:e.elements.map(t)}),"JsdocTypeTuple"),JsdocTypeKeyof:n((e,t)=>({type:"KEY_QUERY",value:t(e.element)}),"JsdocTypeKeyof"),JsdocTypeImport:n(e=>({type:"IMPORT",path:{type:"STRING_VALUE",quoteStyle:j(e.element.meta.quote),string:e.element.value}}),"JsdocTypeImport"),JsdocTypeUndefined:n(()=>({type:"NAME",name:"undefined"}),"JsdocTypeUndefined"),JsdocTypeAny:n(()=>({type:"ANY"}),"JsdocTypeAny"),JsdocTypeFunction:n((e,t)=>{const r=je(e),a={type:e.arrow?"ARROW":"FUNCTION",params:r.params.map(c=>{if(c.type==="JsdocTypeKeyValue"){if(c.right===void 0)throw new Error("Function parameter without ':' is not expected to be 'KEY_VALUE'");return{type:"NAMED_PARAMETER",name:c.key,typeName:t(c.right)}}else return t(c)}),new:null,returns:null};return r.this!==void 0?a.this=t(r.this):e.arrow||(a.this=null),r.new!==void 0&&(a.new=t(r.new)),e.returnType!==void 0&&(a.returns=t(e.returnType)),a},"JsdocTypeFunction"),JsdocTypeGeneric:n((e,t)=>{const r={type:"GENERIC",subject:t(e.left),objects:e.elements.map(t),meta:{syntax:e.meta.brackets==="square"?"SQUARE_BRACKET":e.meta.dot?"ANGLE_BRACKET_WITH_DOT":"ANGLE_BRACKET"}};return e.meta.brackets==="square"&&e.elements[0].type==="JsdocTypeFunction"&&!e.elements[0].parenthesis&&(r.objects[0]={type:"NAME",name:"function"}),r},"JsdocTypeGeneric"),JsdocTypeObjectField:n((e,t)=>{if(typeof e.key!="string")throw new Error("Index signatures and mapped types are not supported");if(e.right===void 0)return{type:"RECORD_ENTRY",key:e.key,quoteStyle:j(e.meta.quote),value:null,readonly:!1};let r=t(e.right);return e.optional&&(r={type:"OPTIONAL",value:r,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:e.key.toString(),quoteStyle:j(e.meta.quote),value:r,readonly:!1}},"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:n(()=>{throw new Error("Keys may not be typed in jsdoctypeparser.")},"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:n((e,t)=>{if(e.right===void 0)return{type:"RECORD_ENTRY",key:e.key,quoteStyle:"none",value:null,readonly:!1};let r=t(e.right);return e.optional&&(r={type:"OPTIONAL",value:r,meta:{syntax:"SUFFIX_KEY_QUESTION_MARK"}}),{type:"RECORD_ENTRY",key:e.key,quoteStyle:"none",value:r,readonly:!1}},"JsdocTypeKeyValue"),JsdocTypeObject:n((e,t)=>{const r=[];for(const a of e.elements)(a.type==="JsdocTypeObjectField"||a.type==="JsdocTypeJsdocObjectField")&&r.push(t(a));return{type:"RECORD",entries:r}},"JsdocTypeObject"),JsdocTypeSpecialNamePath:n(e=>{if(e.specialType!=="module")throw new Error(`jsdoctypeparser does not support type ${e.specialType} at this point.`);return{type:"MODULE",value:{type:"FILE_PATH",quoteStyle:j(e.meta.quote),path:e.value}}},"JsdocTypeSpecialNamePath"),JsdocTypeNamePath:n((e,t)=>{let r=!1,a,c;e.right.type==="JsdocTypeSpecialNamePath"&&e.right.specialType==="event"?(r=!0,a=e.right.value,c=j(e.right.meta.quote)):(a=e.right.value,c=j(e.right.meta.quote));const d={type:sn(e.pathType),owner:t(e.left),name:a,quoteStyle:c,hasEventPrefix:r};if(d.owner.type==="MODULE"){const T=d.owner;return d.owner=d.owner.value,T.value=d,T}else return d},"JsdocTypeNamePath"),JsdocTypeUnion:n((e,t)=>Je("UNION",e.elements.map(t)),"JsdocTypeUnion"),JsdocTypeParenthesis:n((e,t)=>({type:"PARENTHESIS",value:t(N(e.element))}),"JsdocTypeParenthesis"),JsdocTypeNull:n(()=>({type:"NAME",name:"null"}),"JsdocTypeNull"),JsdocTypeUnknown:n(()=>({type:"UNKNOWN"}),"JsdocTypeUnknown"),JsdocTypeStringValue:n(e=>({type:"STRING_VALUE",quoteStyle:j(e.meta.quote),string:e.value}),"JsdocTypeStringValue"),JsdocTypeIntersection:n((e,t)=>Je("INTERSECTION",e.elements.map(t)),"JsdocTypeIntersection"),JsdocTypeNumber:n(e=>({type:"NUMBER_VALUE",number:e.value.toString()}),"JsdocTypeNumber"),JsdocTypeSymbol:x,JsdocTypeProperty:x,JsdocTypePredicate:x,JsdocTypeMappedType:x,JsdocTypeIndexSignature:x,JsdocTypeAsserts:x};function cn(e){return M(an,e)}n(cn,"jtpTransform");function ln(){return{JsdocTypeIntersection:n((e,t)=>({type:"JsdocTypeIntersection",elements:e.elements.map(t)}),"JsdocTypeIntersection"),JsdocTypeGeneric:n((e,t)=>({type:"JsdocTypeGeneric",left:t(e.left),elements:e.elements.map(t),meta:{dot:e.meta.dot,brackets:e.meta.brackets}}),"JsdocTypeGeneric"),JsdocTypeNullable:n(e=>e,"JsdocTypeNullable"),JsdocTypeUnion:n((e,t)=>({type:"JsdocTypeUnion",elements:e.elements.map(t)}),"JsdocTypeUnion"),JsdocTypeUnknown:n(e=>e,"JsdocTypeUnknown"),JsdocTypeUndefined:n(e=>e,"JsdocTypeUndefined"),JsdocTypeTypeof:n((e,t)=>({type:"JsdocTypeTypeof",element:t(e.element)}),"JsdocTypeTypeof"),JsdocTypeSymbol:n((e,t)=>{const r={type:"JsdocTypeSymbol",value:e.value};return e.element!==void 0&&(r.element=t(e.element)),r},"JsdocTypeSymbol"),JsdocTypeOptional:n((e,t)=>({type:"JsdocTypeOptional",element:t(e.element),meta:{position:e.meta.position}}),"JsdocTypeOptional"),JsdocTypeObject:n((e,t)=>({type:"JsdocTypeObject",meta:{separator:"comma"},elements:e.elements.map(t)}),"JsdocTypeObject"),JsdocTypeNumber:n(e=>e,"JsdocTypeNumber"),JsdocTypeNull:n(e=>e,"JsdocTypeNull"),JsdocTypeNotNullable:n((e,t)=>({type:"JsdocTypeNotNullable",element:t(e.element),meta:{position:e.meta.position}}),"JsdocTypeNotNullable"),JsdocTypeSpecialNamePath:n(e=>e,"JsdocTypeSpecialNamePath"),JsdocTypeObjectField:n((e,t)=>({type:"JsdocTypeObjectField",key:e.key,right:e.right===void 0?void 0:t(e.right),optional:e.optional,readonly:e.readonly,meta:e.meta}),"JsdocTypeObjectField"),JsdocTypeJsdocObjectField:n((e,t)=>({type:"JsdocTypeJsdocObjectField",left:t(e.left),right:t(e.right)}),"JsdocTypeJsdocObjectField"),JsdocTypeKeyValue:n((e,t)=>({type:"JsdocTypeKeyValue",key:e.key,right:e.right===void 0?void 0:t(e.right),optional:e.optional,variadic:e.variadic}),"JsdocTypeKeyValue"),JsdocTypeImport:n((e,t)=>({type:"JsdocTypeImport",element:t(e.element)}),"JsdocTypeImport"),JsdocTypeAny:n(e=>e,"JsdocTypeAny"),JsdocTypeStringValue:n(e=>e,"JsdocTypeStringValue"),JsdocTypeNamePath:n(e=>e,"JsdocTypeNamePath"),JsdocTypeVariadic:n((e,t)=>{const r={type:"JsdocTypeVariadic",meta:{position:e.meta.position,squareBrackets:e.meta.squareBrackets}};return e.element!==void 0&&(r.element=t(e.element)),r},"JsdocTypeVariadic"),JsdocTypeTuple:n((e,t)=>({type:"JsdocTypeTuple",elements:e.elements.map(t)}),"JsdocTypeTuple"),JsdocTypeName:n(e=>e,"JsdocTypeName"),JsdocTypeFunction:n((e,t)=>{const r={type:"JsdocTypeFunction",arrow:e.arrow,parameters:e.parameters.map(t),constructor:e.constructor,parenthesis:e.parenthesis};return e.returnType!==void 0&&(r.returnType=t(e.returnType)),r},"JsdocTypeFunction"),JsdocTypeKeyof:n((e,t)=>({type:"JsdocTypeKeyof",element:t(e.element)}),"JsdocTypeKeyof"),JsdocTypeParenthesis:n((e,t)=>({type:"JsdocTypeParenthesis",element:t(e.element)}),"JsdocTypeParenthesis"),JsdocTypeProperty:n(e=>e,"JsdocTypeProperty"),JsdocTypePredicate:n((e,t)=>({type:"JsdocTypePredicate",left:t(e.left),right:t(e.right)}),"JsdocTypePredicate"),JsdocTypeIndexSignature:n((e,t)=>({type:"JsdocTypeIndexSignature",key:e.key,right:t(e.right)}),"JsdocTypeIndexSignature"),JsdocTypeMappedType:n((e,t)=>({type:"JsdocTypeMappedType",key:e.key,right:t(e.right)}),"JsdocTypeMappedType"),JsdocTypeAsserts:n((e,t)=>({type:"JsdocTypeAsserts",left:t(e.left),right:t(e.right)}),"JsdocTypeAsserts")}}n(ln,"identityTransformRules");const Ke={JsdocTypeAny:[],JsdocTypeFunction:["parameters","returnType"],JsdocTypeGeneric:["left","elements"],JsdocTypeImport:[],JsdocTypeIndexSignature:["right"],JsdocTypeIntersection:["elements"],JsdocTypeKeyof:["element"],JsdocTypeKeyValue:["right"],JsdocTypeMappedType:["right"],JsdocTypeName:[],JsdocTypeNamePath:["left","right"],JsdocTypeNotNullable:["element"],JsdocTypeNull:[],JsdocTypeNullable:["element"],JsdocTypeNumber:[],JsdocTypeObject:["elements"],JsdocTypeObjectField:["right"],JsdocTypeJsdocObjectField:["left","right"],JsdocTypeOptional:["element"],JsdocTypeParenthesis:["element"],JsdocTypeSpecialNamePath:[],JsdocTypeStringValue:[],JsdocTypeSymbol:["element"],JsdocTypeTuple:["elements"],JsdocTypeTypeof:["element"],JsdocTypeUndefined:[],JsdocTypeUnion:["elements"],JsdocTypeUnknown:[],JsdocTypeVariadic:["element"],JsdocTypeProperty:[],JsdocTypePredicate:["left","right"],JsdocTypeAsserts:["left","right"]};function ge(e,t,r,a,c){a?.(e,t,r);const d=Ke[e.type];for(const T of d){const w=e[T];if(w!==void 0)if(Array.isArray(w))for(const S of w)ge(S,e,T,a,c);else ge(w,e,T,a,c)}c?.(e,t,r)}n(ge,"_traverse");function pn(e,t,r){ge(e,void 0,void 0,t,r)}n(pn,"traverse"),i.catharsisTransform=on,i.identityTransformRules=ln,i.jtpTransform=cn,i.parse=Ue,i.stringify=tn,i.stringifyRules=Ve,i.transform=M,i.traverse=pn,i.tryParse=Zt,i.visitorKeys=Ke})}(C,C.exports)),C.exports}n(dn,"requireDist");var Ne=dn(),mn=Object.defineProperty,l=n((o,s)=>mn(o,"name",{value:s,configurable:!0}),"o");const{UnknownArgTypesError:$n}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__;function fn(o,s){let i={},p=Object.keys(o);for(let y=0;y<p.length;y++){let u=p[y],m=o[u];i[u]=s(m,u,o)}return i}n(fn,"j");l(fn,"mapValues");const{UnknownArgTypesError:qn}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__;var Tn=["null","undefined"];function oe(o){return Tn.some(s=>s===o)}n(oe,"T");l(oe,"isDefaultValueBlacklisted");var hn=l(o=>{if(!o)return"";if(typeof o=="string")return o;throw new Error(`Description: expected string, got: ${JSON.stringify(o)}`)},"str");function Ee(o){return!!o.__docgenInfo}n(Ee,"z");l(Ee,"hasDocgen");function Jn(o){return o!=null&&Object.keys(o).length>0}n(Jn,"$");l(Jn,"isValidDocgenSection");function gn(o,s){return Ee(o)?o.__docgenInfo[s]:null}n(gn,"Y");l(gn,"getDocgenSection");function Me(o){return Ee(o)?hn(o.__docgenInfo.description):""}n(Me,"q");l(Me,"getDocgenDescription");var F;(function(o){o.start="/**",o.nostart="/***",o.delim="*",o.end="*/"})(F=F||(F={}));function Be(o){return/^\s+$/.test(o)}n(Be,"k");l(Be,"isSpace");function Ce(o){let s=o.match(/\r+$/);return s==null?["",o]:[o.slice(-s[0].length),o.slice(0,-s[0].length)]}n(Ce,"G");l(Ce,"splitCR");function V(o){let s=o.match(/^\s+/);return s==null?["",o]:[o.slice(0,s[0].length),o.slice(s[0].length)]}n(V,"y");l(V,"splitSpace");function Ye(o){return o.split(/\n/)}n(Ye,"K");l(Ye,"splitLines");function Ge(o={}){return Object.assign({tag:"",name:"",type:"",optional:!1,description:"",problems:[],source:[]},o)}n(Ge,"X");l(Ge,"seedSpec");function We(o={}){return Object.assign({start:"",delimiter:"",postDelimiter:"",tag:"",postTag:"",name:"",postName:"",type:"",postType:"",description:"",end:"",lineEnd:""},o)}n(We,"F");l(We,"seedTokens");var wn=/^@\S+/;function Xe({fence:o="```"}={}){let s=Qe(o),i=l((p,y)=>s(p)?!y:y,"toggleFence");return l(function(p){let y=[[]],u=!1;for(let m of p)wn.test(m.tokens.description)&&!u?y.push([m]):y[y.length-1].push(m),u=i(m.tokens.description,u);return y},"parseBlock")}n(Xe,"J");l(Xe,"getParser");function Qe(o){return typeof o=="string"?s=>s.split(o).length%2===0:o}n(Qe,"Je");l(Qe,"getFencer");function He({startLine:o=0,markers:s=F}={}){let i=null,p=o;return l(function(y){let u=y,m=We();if([m.lineEnd,u]=Ce(u),[m.start,u]=V(u),i===null&&u.startsWith(s.start)&&!u.startsWith(s.nostart)&&(i=[],m.delimiter=u.slice(0,s.start.length),u=u.slice(s.start.length),[m.postDelimiter,u]=V(u)),i===null)return p++,null;let h=u.trimRight().endsWith(s.end);if(m.delimiter===""&&u.startsWith(s.delim)&&!u.startsWith(s.end)&&(m.delimiter=s.delim,u=u.slice(s.delim.length),[m.postDelimiter,u]=V(u)),h){let J=u.trimRight();m.end=u.slice(J.length-s.end.length),u=J.slice(0,-s.end.length)}if(m.description=u,i.push({number:p,source:y,tokens:m}),p++,h){let J=i.slice();return i=null,J}return null},"parseSource")}n(He,"N");l(He,"getParser");function ze({tokenizers:o}){return l(function(s){var i;let p=Ge({source:s});for(let y of o)if(p=y(p),!((i=p.problems[p.problems.length-1])===null||i===void 0)&&i.critical)break;return p},"parseSpec")}n(ze,"R");l(ze,"getParser");function Ze(){return o=>{let{tokens:s}=o.source[0],i=s.description.match(/\s*(@(\S+))(\s*)/);return i===null?(o.problems.push({code:"spec:tag:prefix",message:'tag should start with "@" symbol',line:o.source[0].number,critical:!0}),o):(s.tag=i[1],s.postTag=i[3],s.description=s.description.slice(i[0].length),o.tag=i[2],o)}}n(Ze,"P");l(Ze,"tagTokenizer");function et(o="compact"){let s=tt(o);return i=>{let p=0,y=[];for(let[h,{tokens:J}]of i.source.entries()){let O="";if(h===0&&J.description[0]!=="{")return i;for(let P of J.description)if(P==="{"&&p++,P==="}"&&p--,O+=P,p===0)break;if(y.push([J,O]),p===0)break}if(p!==0)return i.problems.push({code:"spec:type:unpaired-curlies",message:"unpaired curlies",line:i.source[0].number,critical:!0}),i;let u=[],m=y[0][0].postDelimiter.length;for(let[h,[J,O]]of y.entries())J.type=O,h>0&&(J.type=J.postDelimiter.slice(m)+O,J.postDelimiter=J.postDelimiter.slice(0,m)),[J.postType,J.description]=V(J.description.slice(O.length)),u.push(J.type);return u[0]=u[0].slice(1),u[u.length-1]=u[u.length-1].slice(0,-1),i.type=s(u),i}}n(et,"S");l(et,"typeTokenizer");var Nn=l(o=>o.trim(),"trim");function tt(o){return o==="compact"?s=>s.map(Nn).join(""):o==="preserve"?s=>s.join(`
`):o}n(tt,"Re");l(tt,"getJoiner");var En=l(o=>o&&o.startsWith('"')&&o.endsWith('"'),"isQuoted");function nt(){let o=l((s,{tokens:i},p)=>i.type===""?s:p,"typeEnd");return s=>{let{tokens:i}=s.source[s.source.reduce(o,0)],p=i.description.trimLeft(),y=p.split('"');if(y.length>1&&y[0]===""&&y.length%2===1)return s.name=y[1],i.name=`"${y[1]}"`,[i.postName,i.description]=V(p.slice(i.name.length)),s;let u=0,m="",h=!1,J;for(let P of p){if(u===0&&Be(P))break;P==="["&&u++,P==="]"&&u--,m+=P}if(u!==0)return s.problems.push({code:"spec:name:unpaired-brackets",message:"unpaired brackets",line:s.source[0].number,critical:!0}),s;let O=m;if(m[0]==="["&&m[m.length-1]==="]"){h=!0,m=m.slice(1,-1);let P=m.split("=");if(m=P[0].trim(),P[1]!==void 0&&(J=P.slice(1).join("=").trim()),m==="")return s.problems.push({code:"spec:name:empty-name",message:"empty name",line:s.source[0].number,critical:!0}),s;if(J==="")return s.problems.push({code:"spec:name:empty-default",message:"empty default value",line:s.source[0].number,critical:!0}),s;if(!En(J)&&/=(?!>)/.test(J))return s.problems.push({code:"spec:name:invalid-default",message:"invalid default value syntax",line:s.source[0].number,critical:!0}),s}return s.optional=h,s.name=m,i.name=O,J!==void 0&&(s.default=J),[i.postName,i.description]=V(p.slice(i.name.length)),s}}n(nt,"O");l(nt,"nameTokenizer");function rt(o="compact",s=F){let i=Pe(o);return p=>(p.description=i(p.source,s),p)}n(rt,"v");l(rt,"descriptionTokenizer");function Pe(o){return o==="compact"?ot:o==="preserve"?st:o}n(Pe,"A");l(Pe,"getJoiner");function ot(o,s=F){return o.map(({tokens:{description:i}})=>i.trim()).filter(i=>i!=="").join(" ")}n(ot,"Ve");l(ot,"compactJoiner");var Pn=l((o,{tokens:s},i)=>s.type===""?o:i,"lineNo"),bn=l(({tokens:o})=>(o.delimiter===""?o.start:o.postDelimiter.slice(1))+o.description,"getDescription");function st(o,s=F){if(o.length===0)return"";o[0].tokens.description===""&&o[0].tokens.delimiter===s.start&&(o=o.slice(1));let i=o[o.length-1];return i!==void 0&&i.tokens.description===""&&i.tokens.end.endsWith(s.end)&&(o=o.slice(0,-1)),o=o.slice(o.reduce(Pn,0)),o.map(bn).join(`
`)}n(st,"Be");l(st,"preserveJoiner");function at({startLine:o=0,fence:s="```",spacing:i="compact",markers:p=F,tokenizers:y=[Ze(),et(i),nt(),rt(i)]}={}){if(o<0||o%1>0)throw new Error("Invalid startLine");let u=He({startLine:o,markers:p}),m=Xe({fence:s}),h=ze({tokenizers:y}),J=Pe(i);return function(O){let P=[];for(let se of Ye(O)){let $=u(se);if($===null)continue;let Y=m($),G=Y.slice(1).map(h);P.push({description:J(Y[0],p),tags:G,source:$,problems:G.reduce((b,ae)=>b.concat(ae.problems),[])})}return P}}n(at,"V");l(at,"getParser");function it(o){return o.start+o.delimiter+o.postDelimiter+o.tag+o.postTag+o.type+o.postType+o.name+o.postName+o.description+o.end+o.lineEnd}n(it,"Ie");l(it,"join");function kn(){return o=>o.source.map(({tokens:s})=>it(s)).join(`
`)}n(kn,"C");l(kn,"getStringifier");function ct(o,s={}){return at(s)(o)}n(ct,"H");l(ct,"parse");function lt(o){return o!=null&&o.includes("@")}n(lt,"ze");l(lt,"containsJsDoc");function pt(o){let s=`/**
`+(o??"").split(`
`).map(p=>` * ${p}`).join(`
`)+`
*/`,i=ct(s,{spacing:"preserve"});if(!i||i.length===0)throw new Error("Cannot parse JSDoc tags.");return i[0]}n(pt,"$e");l(pt,"parse");var xn={tags:["param","arg","argument","returns","ignore","deprecated"]},Sn=l((o,s=xn)=>{if(!lt(o))return{includesJsDoc:!1,ignore:!1};let i=pt(o),p=ut(i,s.tags);return p.ignore?{includesJsDoc:!0,ignore:!0}:{includesJsDoc:!0,ignore:!1,description:i.description.trim(),extractedTags:p}},"parseJsDoc");function ut(o,s){let i={params:null,deprecated:null,returns:null,ignore:!1};for(let p of o.tags)if(!(s!==void 0&&!s.includes(p.tag)))if(p.tag==="ignore"){i.ignore=!0;break}else switch(p.tag){case"param":case"arg":case"argument":{let y=dt(p);y!=null&&(i.params==null&&(i.params=[]),i.params.push(y));break}case"deprecated":{let y=mt(p);y!=null&&(i.deprecated=y);break}case"returns":{let y=ft(p);y!=null&&(i.returns=y);break}}return i}n(ut,"qe");l(ut,"extractJsDocTags");function yt(o){return o.replace(/[\.-]$/,"")}n(yt,"Ge");l(yt,"normaliseParamName");function dt(o){if(!o.name||o.name==="-")return null;let s=xe(o.type);return{name:o.name,type:s,description:ke(o.description),getPrettyName:l(()=>yt(o.name),"getPrettyName"),getTypeName:l(()=>s?Se(s):null,"getTypeName")}}n(dt,"Ke");l(dt,"extractParam");function mt(o){return o.name?be(o.name,o.description):null}n(mt,"Xe");l(mt,"extractDeprecated");function be(o,s){let i=o===""?s:`${o} ${s}`;return ke(i)}n(be,"Z");l(be,"joinNameAndDescription");function ke(o){let s=o.replace(/^- /g,"").trim();return s===""?null:s}n(ke,"ee");l(ke,"normaliseDescription");function ft(o){let s=xe(o.type);return s?{type:s,description:be(o.name,o.description),getTypeName:l(()=>Se(s),"getTypeName")}:null}n(ft,"He");l(ft,"extractReturns");var U=Ne.stringifyRules(),On=U.JsdocTypeObject;U.JsdocTypeAny=()=>"any";U.JsdocTypeObject=(o,s)=>`(${On(o,s)})`;U.JsdocTypeOptional=(o,s)=>s(o.element);U.JsdocTypeNullable=(o,s)=>s(o.element);U.JsdocTypeNotNullable=(o,s)=>s(o.element);U.JsdocTypeUnion=(o,s)=>o.elements.map(s).join("|");function xe(o){try{return Ne.parse(o,"typescript")}catch{return null}}n(xe,"te");l(xe,"extractType");function Se(o){return Ne.transform(U,o)}n(Se,"re");l(Se,"extractTypeName");function Oe(o){return o.length>90}n(Oe,"B");l(Oe,"isTooLongForTypeSummary");function Tt(o){return o.length>50}n(Tt,"oe");l(Tt,"isTooLongForDefaultValueSummary");function E(o,s){return o===s?{summary:o}:{summary:o,detail:s}}n(E,"l");l(E,"createSummaryValue");function In(o,s){if(o!=null){let{value:i}=o;if(!oe(i))return Tt(i)?E(s?.name,i):E(i)}return null}n(In,"ne");l(In,"createDefaultValue");function Ie({name:o,value:s,elements:i,raw:p}){return s??(i!=null?i.map(Ie).join(" | "):p??o)}n(Ie,"se");l(Ie,"generateUnionElement");function ht({name:o,raw:s,elements:i}){return i!=null?E(i.map(Ie).join(" | ")):s!=null?E(s.replace(/^\|\s*/,"")):E(o)}n(ht,"Ze");l(ht,"generateUnion");function Jt({type:o,raw:s}){return s!=null?E(s):E(o)}n(Jt,"et");l(Jt,"generateFuncSignature");function gt({type:o,raw:s}){return s!=null?Oe(s)?E(o,s):E(s):E(o)}n(gt,"tt");l(gt,"generateObjectSignature");function wt(o){let{type:s}=o;return s==="object"?gt(o):Jt(o)}n(wt,"rt");l(wt,"generateSignature");function Nt({name:o,raw:s}){return s!=null?Oe(s)?E(o,s):E(s):E(o)}n(Nt,"ot");l(Nt,"generateDefault");function vn(o){if(o==null)return null;switch(o.name){case"union":return ht(o);case"signature":return wt(o);default:return Nt(o)}}n(vn,"ie");l(vn,"createType");function An({defaultValue:o}){if(o!=null){let{value:s}=o;if(!oe(s))return E(s)}return null}n(An,"ae");l(An,"createDefaultValue");function Rn({tsType:o,required:s}){if(o==null)return null;let i=o.name;return s||(i=i.replace(" | undefined","")),E(["Array","Record","signature"].includes(o.name)?o.raw:i)}n(Rn,"ce");l(Rn,"createType");function Et(o){return o!=null?E(o.name):null}n(Et,"nt");l(Et,"createType");function Pt(o){let{computed:s,func:i}=o;return typeof s>"u"&&typeof i>"u"}n(Pt,"st");l(Pt,"isReactDocgenTypescript");function bt(o){return o?o.name==="string"?!0:o.name==="enum"?Array.isArray(o.value)&&o.value.every(({value:s})=>typeof s=="string"&&s[0]==='"'&&s[s.length-1]==='"'):!1:!1}n(bt,"it");l(bt,"isStringValued");function kt(o,s){if(o!=null){let{value:i}=o;if(!oe(i))return Pt(o)&&bt(s)?E(JSON.stringify(i)):E(i)}return null}n(kt,"pt");l(kt,"createDefaultValue");function _n(o,s,i){let{description:p,required:y,defaultValue:u}=i;return{name:o,type:Et(s),required:y,description:p,defaultValue:kt(u,s)}}n(_n,"ue");l(_n,"createBasicPropDef");function Ln(o,s){if(s?.includesJsDoc){let{description:i,extractedTags:p}=s;i!=null&&(o.description=s.description);let y={...p,params:p?.params?.map(u=>({name:u.getPrettyName(),description:u.description}))};Object.values(y).filter(Boolean).length>0&&(o.jsDocTags=y)}return o}n(Ln,"w");l(Ln,"applyJsDocResult");function Fn(o,s,i,p){let y=Sn(s.description);return y.includesJsDoc&&y.ignore?null:{propDef:p(o,s,y),jsDocTags:y.extractedTags,docgenInfo:s,typeSystem:i}}n(Fn,"fe");l(Fn,"extractProp");function Un(o){return o!=null?Me(o):""}n(Un,"nn");l(Un,"extractComponentDescription");const{combineParameters:jn}=__STORYBOOK_MODULE_PREVIEW_API__;var Mn=l(o=>{let{component:s,argTypes:i,parameters:{docs:p={}}}=o,{extractArgTypes:y}=p,u=y&&s?y(s):{};return u?jn(u,i):i},"enhanceArgTypes"),Vn="storybook/docs",Bn=`${Vn}/snippet-rendered`,Kn=(o=>(o.AUTO="auto",o.CODE="code",o.DYNAMIC="dynamic",o))(Kn||{});export{Mn as c,Kn as g,Bn as y};
